/*
Copyright (c) 2012 jqWidgets.
http://jqwidgets.com/license/
*/

(function(a){a.jqx.jqxWidget("myWidget","",{});a.extend(a.jqx._myWidget.prototype,{var1:5,var2:10,foo:function(b){this.var1*=b},bar:function(){alert(this.var1)},createInstance:function(b){}});a.jqx.jqxWidget("jqxScrollBar","",{});a.extend(a.jqx._jqxScrollBar.prototype,{defineInstance:function(){this.height=null;this.width=null;this.vertical=false;this.min=0;this.max=1000;this.value=this.min;this.step=10;this.largestep=50;this.thumbMinSize=10;this.thumbSize=0;this.roundedCorners="all";this.showButtons=true;this.disabled=false;this._triggervaluechanged=true},createInstance:function(c){var b=this;this.host.append("<div id='jqxScrollOuterWrap' style='width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollAreaUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollThumb' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollAreaDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollBtnDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div></div>");if(this.width!=undefined&&parseInt(this.width)>0){this.host.width(parseInt(this.width))}if(this.height!=undefined&&parseInt(this.height)>0){this.host.height(parseInt(this.height))}this.btnUp=this.host.find("#jqxScrollBtnUp");this.btnDown=this.host.find("#jqxScrollBtnDown");this.btnThumb=this.host.find("#jqxScrollThumb");this.areaUp=this.host.find("#jqxScrollAreaUp");this.areaDown=this.host.find("#jqxScrollAreaDown");this.scrollWrap=this.host.find("#jqxScrollWrap");this.scrollOuterWrap=this.host.find("#jqxScrollOuterWrap");this.btnUp.jqxRepeatButton({overrideTheme:true});this.btnDown.jqxRepeatButton({overrideTheme:true});this.btnDownInstance=a.data(this.btnDown[0],"jqxRepeatButton").instance;this.btnUpInstance=a.data(this.btnUp[0],"jqxRepeatButton").instance;this.areaUp.jqxRepeatButton({overrideTheme:true,delay:300});this.areaDown.jqxRepeatButton({overrideTheme:true,delay:300});this.btnThumb.jqxButton({overrideTheme:true});this.isTouchDevice=a.jqx.mobile.isTouchDevice();this.setPosition(this.value);this._arrange();this._addHandlers();this.propertyChangeMap.value=function(d,f,e,g){d.setPosition(g)};this.propertyChangeMap.max=function(d,f,e,g){if(e!=g){d.setPosition(d.value);d._arrange()}};this.propertyChangeMap.min=function(d,f,e,g){if(e!=g){d.setPosition(d.value);d._arrange()}};this.buttonUpCapture=false;this.buttonDownCapture=false;this.setTheme();this._arrange();if(b.isTouchDevice){this.addHandler(this.btnThumb,"touchstart",function(d){if(!b.disabled){b.handlemousedown(d)}});a.jqx.mobile.touchScroll(this.element,b.max,function(f,e){if(b.host.css("visibility")=="visible"){var d=b.value;if(b.vertical){b.setPosition(d-e)}else{b.setPosition(d-f)}}})}},_addHandlers:function(){var c=this;this.addHandler(this.btnUp,"click",function(d){if(c.buttonUpCapture&&!c.isTouchDevice){if(!c.disabled){c.setPosition(c.value-c.step)}}else{if(!c.disabled&&c.isTouchDevice){c.setPosition(c.value-c.step)}}});this.addHandler(this.btnDown,"click",function(d){if(c.buttonDownCapture&&!c.isTouchDevice){if(!c.disabled){c.setPosition(c.value+c.step)}}else{if(!c.disabled&&c.isTouchDevice){c.setPosition(c.value+c.step)}}});if(!this.isTouchDevice){if(window.frameElement){if(window.top!=null){this.addHandler(a(window.top.document),"mouseup."+this.element.id,function(d){if(!c.disabled){c.handlemouseup(c,d)}})}}this.addHandler(this.btnDown,"mouseup",function(d){if(!c.btnDownInstance.base.disabled){c.buttonDownCapture=false;c.btnDown.removeClass(c.toThemeProperty("jqx-scrollbar-button-state-pressed"));c.handlemouseup(c,d);c.setPosition(c.value+c.step);return false}});this.addHandler(this.btnUp,"mouseup",function(d){if(!c.btnUpInstance.base.disabled){c.buttonUpCapture=false;c.btnUp.removeClass(c.toThemeProperty("jqx-scrollbar-button-state-pressed"));c.handlemouseup(c,d);c.setPosition(c.value-c.step);return false}});this.addHandler(this.btnDown,"mousedown",function(d){if(!c.btnDownInstance.base.disabled){c.buttonDownCapture=true;c.btnDown.addClass(c.toThemeProperty("jqx-scrollbar-button-state-pressed"));return false}});this.addHandler(this.btnUp,"mousedown",function(d){if(!c.btnUpInstance.base.disabled){c.buttonUpCapture=true;c.btnUp.addClass(c.toThemeProperty("jqx-scrollbar-button-state-pressed"));return false}})}this.addHandler(this.areaUp,"click",function(d){if(!c.disabled){c.setPosition(c.value-c.largestep);return false}});this.addHandler(this.areaDown,"click",function(d){if(!c.disabled){c.setPosition(c.value+c.largestep);return false}});this.addHandler(this.areaUp,"mousedown",function(d){if(!c.disabled){return false}});this.addHandler(this.areaDown,"mousedown",function(d){if(!c.disabled){return false}});this.addHandler(this.btnThumb,"mousedown",function(d){if(!c.disabled){c.handlemousedown(d)}return false});this.addHandler(this.btnThumb,"dragstart",function(d){return false});this.addHandler(a(document),"mouseup."+this.element.id,function(d){if(!c.disabled){c.handlemouseup(c,d)}});if(!this.isTouchDevice){this.addHandler(a(document),"mousemove."+this.element.id,function(d){if(!c.disabled){c.handlemousemove(d)}});this.addHandler(a(document),"mouseleave."+this.element.id,function(d){if(!c.disabled){c.handlemouseleave(d)}});this.addHandler(a(document),"mouseenter."+this.element.id,function(d){if(!c.disabled){c.handlemouseenter(d)}});if(!c.disabled){this.btnUp.hover(function(){if(!c.disabled&&!c.btnUpInstance.base.disabled){c.btnUp.addClass(c.toThemeProperty("jqx-scrollbar-button-state-hover"))}},function(){if(!c.disabled&&!c.btnUpInstance.base.disabled){c.btnUp.removeClass(c.toThemeProperty("jqx-scrollbar-button-state-hover"))}});var b=c.toThemeProperty("jqx-scrollbar-thumb-state-hover");if(!c.vertical){b=c.toThemeProperty("jqx-scrollbar-thumb-state-hover-horizontal")}this.btnThumb.hover(function(){if(!c.disabled){c.btnThumb.addClass(b)}},function(){if(!c.disabled){c.btnThumb.removeClass(b)}});this.btnDown.hover(function(){if(!c.disabled&&!c.btnDownInstance.base.disabled){c.btnDown.addClass(c.toThemeProperty("jqx-scrollbar-button-state-hover"))}},function(){if(!c.disabled&&!c.btnDownInstance.base.disabled){c.btnDown.removeClass(c.toThemeProperty("jqx-scrollbar-button-state-hover"))}})}}},destroy:function(){var b=this.btnUp;var f=this.btnDown;var d=this.btnThumb;var c=this.scrollWrap;var g=this.areaUp;var e=this.areaDown;e.removeClass();g.removeClass();f.removeClass();b.removeClass();d.removeClass();b.jqxRepeatButton("destroy");f.jqxRepeatButton("destroy");g.jqxRepeatButton("destroy");e.jqxRepeatButton("destroy");d.jqxButton("destroy");this._removeHandlers();this.host.removeClass();this.host.remove()},_removeHandlers:function(){this.removeHandler(this.btnUp,"click");this.removeHandler(this.btnDown,"click");this.removeHandler(this.btnDown,"mouseup");this.removeHandler(this.btnUp,"mouseup");this.removeHandler(this.btnDown,"mousedown");this.removeHandler(this.btnUp,"mousedown");this.removeHandler(this.areaUp,"mousedown");this.removeHandler(this.areaDown,"mousedown");this.removeHandler(this.areaUp,"click");this.removeHandler(this.areaDown,"click");this.removeHandler(this.btnThumb,"mousedown");this.removeHandler(a(document),"mouseup."+this.element.id);this.removeHandler(a(document),"mousemove."+this.element.id);this.removeHandler(a(document),"mouseleave."+this.element.id);this.removeHandler(a(document),"mouseenter."+this.element.id);if(window.frameElement){if(window.top!=null){this.removeHandler(a(window.top.document),"mouseup."+this.element.id)}}this.btnUp.unbind("hover");this.btnThumb.unbind("hover");this.btnDown.unbind("hover")},setTheme:function(){var b=this.btnUp;var f=this.btnDown;var d=this.btnThumb;var c=this.scrollWrap;var g=this.areaUp;var e=this.areaDown;e.removeClass();g.removeClass();f.removeClass();b.removeClass();d.removeClass();this.scrollWrap.addClass(this.toThemeProperty("jqx-reset"));this.scrollOuterWrap.addClass(this.toThemeProperty("jqx-reset"));this.areaUp.addClass(this.toThemeProperty("jqx-reset"));this.areaDown.addClass(this.toThemeProperty("jqx-reset"));this.host.addClass(this.toThemeProperty("jqx-scrollbar"));f.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal"));b.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal"));if(this.vertical){b.addClass(this.toThemeProperty("icon-arrow-up"));f.addClass(this.toThemeProperty("icon-arrow-down"));d.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal"))}else{b.addClass(this.toThemeProperty("icon-arrow-left"));f.addClass(this.toThemeProperty("icon-arrow-right"));d.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-horizontal"))}if(this.disabled){c.addClass(this.toThemeProperty("jqx-fill-state-disabled"));c.removeClass(this.toThemeProperty("jqx-scrollbar-state-normal"))}else{c.addClass(this.toThemeProperty("jqx-scrollbar-state-normal"));c.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))}if(b.jqxRepeatButton("disabled")!=this.disabled){b.jqxRepeatButton("disabled",this.disabled)}if(f.jqxRepeatButton("disabled")!=this.disabled){f.jqxRepeatButton("disabled",this.disabled)}if(d.jqxButton("disabled")!=this.disabled){d.jqxButton("disabled",this.disabled)}},isScrolling:function(){if(this.thumbCapture==undefined||this.buttonDownCapture==undefined||this.buttonUpCapture==undefined){return false}return this.thumbCapture||this.buttonDownCapture||this.buttonUpCapture},handlemousedown:function(c){if(this.thumbCapture==undefined||this.thumbCapture==false){this.thumbCapture=true;var b=this.btnThumb;if(b!=null){if(this.vertical){b.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"))}else{b.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"))}}}this.dragStartX=c.clientX;this.dragStartY=c.clientY;this.dragStartValue=this.value},toggleHover:function(c,b){},refresh:function(){this._arrange()},_setElementPosition:function(c,b,d){if(!isNaN(b)){c[0].style.left=b+"px"}if(!isNaN(d)){c[0].style.top=d+"px"}},_setElementTopPosition:function(b,c){if(!isNaN(c)){b[0].style.top=c+"px"}},_setElementLeftPosition:function(c,b){if(!isNaN(b)){c[0].style.left=b+"px"}},handlemouseleave:function(e){var b=this.btnUp;var d=this.btnDown;b.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));d.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));if(this.thumbCapture!=true){return}var c=this.btnThumb;var f=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");c.removeClass(f)},handlemouseenter:function(e){var b=this.btnUp;var d=this.btnDown;if(this.buttonUpCapture){b.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"))}if(this.buttonDownCapture){d.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"))}if(this.thumbCapture!=true){return}var c=this.btnThumb;if(this.vertical){c.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"))}else{c.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"))}},handlemousemove:function(b){var h=this.btnUp;var d=this.btnDown;var c=0;if(d==null||h==null){return}if(h!=null&&d!=null&&this.buttonDownCapture!=undefined&&this.buttonUpCapture!=undefined){if(this.buttonDownCapture&&b.which==c){d.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));this.buttonDownCapture=false}else{if(this.buttonUpCapture&&b.which==c){h.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));this.buttonUpCapture=false}}}if(this.thumbCapture!=true){return false}var j=this.btnThumb;if(b.which==c){this.thumbCapture=false;this._arrange();var i=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");j.removeClass(i);return true}if(b.preventDefault!=undefined){b.preventDefault()}if(b.originalEvent!=null){b.originalEvent.mouseHandled=true}if(b.stopPropagation!=undefined){b.stopPropagation()}var k=0;try{if(!this.vertical){k=b.clientX-this.dragStartX}else{k=b.clientY-this.dragStartY}var e=(this.vertical)?h.height()+d.height()+j.height():h.width()+d.width()+j.width();var f=(this.max-this.min)/(this.scrollBarSize-e);k*=f;this.setPosition(this.dragStartValue+k)}catch(g){alert(g)}return false},handlemouseup:function(d,g){var c=false;if(this.thumbCapture){this.thumbCapture=false;var e=this.btnThumb;var h=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");e.removeClass(h);c=true}if(this.buttonUpCapture||this.buttonUpCapture){var b=this.btnUp;var f=this.btnDown;this.buttonUpCapture=false;this.buttonDownCapture=false;b.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));f.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));c=true}if(c){if(g.preventDefault!=undefined){g.preventDefault()}if(g.originalEvent!=null){g.originalEvent.mouseHandled=true}if(g.stopPropagation!=undefined){g.stopPropagation()}}},setPosition:function(b){var d=this.element;if(b==undefined||b==NaN){b=this.min}if(b>=this.max){b=this.max}if(b<this.min){b=this.min}var e=new jQuery.Event("valuechanged");if(this.value!=b){if(b==this.max){var c=new jQuery.Event("complete");this.host.trigger(c)}e.previousValue=this.value;e.currentValue=b;this.value=b;this._positionelements();if(this._triggervaluechanged){this.host.trigger(e)}if(this.valuechanged){this.valuechanged({currentValue:e.currentValue,previousvalue:e.previousValue})}}return b},_getThumbSize:function(b){var d=this.max-this.min;var c=0;if(d>1){c=(b/(d+b)*b)}else{if(d==1){c=b}}if(this.thumbSize>0){c=this.thumbSize}if(c<this.thumbMinSize){c=this.thumbMinSize}return Math.min(c,b)},_positionelements:function(){var g=this.element;var m=this.areaUp;var e=this.areaDown;var h=this.btnUp;var f=this.btnDown;var n=this.btnThumb;var b=this.scrollWrap;var o=this.host.height();var c=this.host.width();var k=(!this.vertical)?o:c;if(!this.showButtons){k=0}var l=(!this.vertical)?c:o;this.scrollBarSize=l;var d=this._getThumbSize(l-2*k);d=Math.round(d);if(d<this.thumbMinSize){d=this.thumbMinSize}if(o==NaN||o<10){o=10}if(c==NaN||c<10){c=10}k+=2;this.btnSize=k;var i=(this.vertical)?2*this.btnSize+n.outerHeight():2*this.btnSize+n.outerWidth();i=Math.round(i);var j=(l-i)/(this.max-this.min)*this.value;j=Math.round(j);if(this.vertical){e[0].style.height=l-j-i+"px";m[0].style.height=j+"px";this._setElementTopPosition(m,k);this._setElementTopPosition(n,k+j);this._setElementTopPosition(e,k+j+d)}else{m[0].style.width=j+"px";e[0].style.width=l-j-i+"px";this._setElementLeftPosition(m,k);this._setElementLeftPosition(n,k+j);this._setElementLeftPosition(e,2+k+j+d)}},_arrange:function(){var d=this.element;var h=this.areaUp;var t=this.areaDown;var c=this.btnUp;var m=this.btnDown;var u=this.btnThumb;var o=this.scrollWrap;if(this.roundedCorners=="all"){if(this.vertical){c.jqxRepeatButton();m.jqxRepeatButton();var g=a.jqx.cssroundedcorners("top");g=this.toThemeProperty(g);c.addClass(g);var q=a.jqx.cssroundedcorners("bottom");q=this.toThemeProperty(q);m.addClass(q)}else{c.jqxRepeatButton();m.jqxRepeatButton();var l=a.jqx.cssroundedcorners("left");l=this.toThemeProperty(l);c.addClass(l);var i=a.jqx.cssroundedcorners("right");i=this.toThemeProperty(i);m.addClass(i)}}else{var s=a.jqx.cssroundedcorners(this.roundedCorners);s=this.toThemeProperty(s);c.addClass(s);m.addClass(s)}u.jqxButton();var s=a.jqx.cssroundedcorners(this.roundedCorners);s=this.toThemeProperty(s);u.addClass(s);var n=this.host.height();var p=this.host.width();var b=(!this.vertical)?n:p;if(!this.showButtons){b=0}c.css({width:b+"px"});c.css({height:b+"px"});m.css({width:b+"px"});m.css({height:b+"px"});if(this.vertical){o.css({width:p+2+"px"})}else{o.css({height:n+2+"px"})}this._setElementPosition(c,0,0);if(this.vertical){this._setElementPosition(m,0,n-m.outerHeight())}else{this._setElementPosition(m,p-m.outerWidth(),0)}var f=(!this.vertical)?p:n;this.scrollBarSize=f;var j=this._getThumbSize(f-2*b);j=Math.round(j);if(j<this.thumbMinSize){j=this.thumbMinSize}if(!this.vertical){u.css({width:j+"px"});u.css({height:n+"px"})}else{u.css({width:p+"px"});u.css({height:j+"px"})}if(n==NaN||n<10){n=10}if(p==NaN||p<10){p=10}b+=2;this.btnSize=b;var e=(this.vertical)?2*this.btnSize+u.outerHeight():2*this.btnSize+u.outerWidth();e=Math.round(e);var v=(f-e)/(this.max-this.min)*this.value;v=Math.round(v);if(isNaN(v)){v=0}if(this.vertical){t.css({height:(f-v-e)+"px",width:p+"px"});h.css({height:v+"px",width:p+"px"});var k=parseInt(this.host.height());if(k-3*parseInt(b)<0){u.css("visibility","hidden")}else{if(k<e){u.css("visibility","hidden")}else{if(this.host.css("visibility")=="visible"){u.css("visibility","inherit")}}}this._setElementPosition(h,0,b);this._setElementPosition(u,0,b+v);this._setElementPosition(t,0,b+v+j)}else{h.css({width:v+"px",height:n+"px"});t.css({width:(f-v-e)+"px",height:n+"px"});var r=parseInt(this.host.width());if(r-3*parseInt(b)<0){u.css("visibility","hidden")}else{if(r<e){u.css("visibility","hidden")}else{if(this.host.css("visibility")=="visible"){u.css("visibility","inherit")}}}this._setElementPosition(h,b,0);this._setElementPosition(u,b+v,0);this._setElementPosition(t,2+b+v+j,0)}}})})(jQuery);