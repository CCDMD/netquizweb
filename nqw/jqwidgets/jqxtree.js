/*
Copyright (c) 2012 jqWidgets.
http://jqwidgets.com/license/
*/

(function(a){a.jqx.jqxWidget("jqxTree","",{});a.extend(a.jqx._jqxTree.prototype,{defineInstance:function(){this.items=new Array();this.width=null;this.height=null;this.easing="easeInOutCirc";this.animationShowDuration="fast";this.animationHideDuration="fast";this.treeElements=new Array();this.disabled=false;this.enableHover=true;this.enableKeyboardNavigation=true;this.toggleMode="dblclick";this.source=null;this.checkboxes=false;this.hasThreeStates=false;this.selectedItem=null;this.events=["expand","collapse","select","initialized","added","removed","checkchange"]},createInstance:function(c){var b=this;this.propertyChangeMap.disabled=function(f,h,g,j){if(b.disabled){b.host.addClass(b.toThemeProperty("jqx-tree-disabled"))}else{b.host.removeClass(b.toThemeProperty("jqx-tree-disabled"))}};if(this.width!=null&&this.width.toString().indexOf("px")!=-1){this.host.width(this.width)}else{if(this.width!=undefined&&!isNaN(this.width)){this.host.width(this.width)}}if(this.height!=null&&this.height.toString().indexOf("px")!=-1){this.host.height(this.height)}else{if(this.height!=undefined&&!isNaN(this.height)){this.host.height(this.height)}}this.host.attr("tabIndex",1);if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-tree-disabled"))}this.originalInnerHTML=this.element.innerHTML;this.createdTree=false;if(this.element.innerHTML.indexOf("UL")){var e=this.host.find("ul:first");if(e.length>0){this.createTree(e[0]);this.createdTree=true}}if(this.source!=null){var d=this.loadItems(this.source);this.element.innerHTML=d;var e=this.host.find("ul:first");if(e.length>0){this.createTree(e[0]);this.createdTree=true}}if(this.createdTree==true){this._render();this._handleKeys()}},checkItems:function(f,h){var e=this;if(f!=null){var d=0;var g=false;var b=0;var j=a(f.element).find("li");b=j.length;a.each(j,function(k){var l=e.itemMapping[this.id].item;if(l.checked!=false){if(l.checked==null){g=true}d++}});if(f!=h){if(d==b){this.checkItem(f.element,true)}else{if(d>0){this.checkItem(f.element,null)}else{this.checkItem(f.element,false)}}}else{var c=h.checked;var j=a(h.element).find("li");a.each(j,function(){var k=e.itemMapping[this.id].item;e.checkItem(this,c)})}this.checkItems(this._parentItem(f),h)}else{var c=h.checked;var j=a(h.element).find("li");a.each(j,function(){var k=e.itemMapping[this.id].item;e.checkItem(this,c)})}},_handleKeys:function(){var b=this;this.addHandler(this.host,"keydown",function(j){var g=j.keyCode;if(b.enableKeyboardNavigation){if(b.selectedItem!=null){var f=b.selectedItem.element;switch(g){case 32:if(b.checkboxes){b.fromKey=true;var h=a(b.selectedItem.checkBoxElement).jqxCheckBox("checked");b.checkItem(b.selectedItem.element,!h);if(b.hasThreeStates){b.checkItems(b.selectedItem,b.selectedItem)}}return false;case 33:var e=b._getItemsOnPage();var d=b.selectedItem;for(i=0;i<e;i++){d=b._prevVisibleItem(d)}if(d!=null){b.selectItem(d.element);b.ensureVisible(d.element)}else{b.selectItem(b._firstItem().element);b.ensureVisible(b._firstItem().element)}return false;case 34:var e=b._getItemsOnPage();var c=b.selectedItem;for(i=0;i<e;i++){c=b._nextVisibleItem(c)}if(c!=null){b.selectItem(c.element);b.ensureVisible(c.element)}else{b.selectItem(b._lastItem().element);b.ensureVisible(b._lastItem().element)}return false;case 37:if(b.selectedItem.hasItems){b.collapseItem(f)}return false;case 39:if(b.selectedItem.hasItems){b.expandItem(f)}return false;case 13:if(b.selectedItem.hasItems){if(b.selectedItem.isExpanded){b.collapseItem(f)}else{b.expandItem(f)}}return false;case 36:b.selectItem(b._firstItem().element);b.ensureVisible(b._firstItem().element);return false;case 35:b.selectItem(b._lastItem().element);b.ensureVisible(b._lastItem().element);return false;case 38:var d=b._prevVisibleItem(b.selectedItem);if(d!=null){b.selectItem(d.element);b.ensureVisible(d.element)}return false;case 40:var c=b._nextVisibleItem(b.selectedItem);if(c!=null){b.selectItem(c.element);b.ensureVisible(c.element)}return false}}}})},_firstItem:function(){var d=null;var c=this;var f=this.host.find("ul:first");var e=a(f).find("li");for(i=0;i<=e.length-1;i++){var b=e[i];d=this.itemMapping[b.id].item;if(c._isVisible(d)){return d}}return null},_lastItem:function(){var d=null;var c=this;var f=this.host.find("ul:first");var e=a(f).find("li");for(i=e.length-1;i>=0;i--){var b=e[i];d=this.itemMapping[b.id].item;if(c._isVisible(d)){return d}}return null},_parentItem:function(d){if(d==null||d==undefined){return null}var c=d.parentElement;var b=null;a.each(this.items,function(){if(this.element==c){b=this;return false}});return b},_nextVisibleItem:function(c){if(c==null||c==undefined){return null}var b=c;while(b!=null){b=b.nextItem;if(this._isVisible(b)&&!b.disabled){return b}}return null},_prevVisibleItem:function(c){if(c==null||c==undefined){return null}var b=c;while(b!=null){b=b.prevItem;if(this._isVisible(b)&&!b.disabled){return b}}return null},_isVisible:function(c){if(c==null||c==undefined){return false}if(!this._isElementVisible(c.element)){return false}var b=this._parentItem(c);if(b==null){return true}if(b!=null){if(!this._isElementVisible(b.element)){return false}if(b.isExpanded){while(b!=null){b=this._parentItem(b);if(b!=null&&!this._isElementVisible(b.element)){return false}if(b!=null&&!b.isExpanded){return false}}}else{return false}}return true},_getItemsOnPage:function(){var d=0;var c=this.panel.jqxPanel("getVScrollPosition");var b=parseInt(this.host.height());var f=0;var e=this._firstItem();if(parseInt(a(e.element).height())>0){while(f<=b){f+=parseInt(a(e.element).outerHeight());d++}}return d},_isElementVisible:function(b){if(b==null){return false}if(a(b).css("display")!="none"&&a(b).css("visibility")!="hidden"){return true}return false},refresh:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1){this.host.width(this.width)}else{if(this.width!=undefined&&!isNaN(this.width)){this.host.width(this.width)}}if(this.height!=null&&this.height.toString().indexOf("px")!=-1){this.host.height(this.height)}else{if(this.height!=undefined&&!isNaN(this.height)){this.host.height(this.height)}}if(this.panel){this.panel.jqxPanel("width",this.host.width());this.panel.jqxPanel("height",this.height);this.panel.jqxPanel("_arrange")}},loadItems:function(c){if(c==null){return}var b=this;this.items=new Array();var d="<ul>";a.map(c,function(e){if(e==undefined){return null}d+=b._parseItem(e)});d+="</ul>";return d},_parseItem:function(j){var e="";if(j==undefined){return null}var d=j.label;var c=false;if(j.expanded!=undefined&&j.expanded){c=true}var b=false;if(j.locked!=undefined&&j.locked){b=true}var g=false;if(j.selected!=undefined&&j.selected){g=true}var f=false;if(j.disabled!=undefined&&j.disabled){f=true}var h=false;if(j.checked!=undefined&&j.checked){h=true}e+="<li";if(c){e+=' item-expanded="true" '}if(b){e+=' item-locked="true" '}if(f){e+=' item-disabled="true" '}if(g){e+=' item-selected="true" '}e+=' item-label="'+d+'" ';e+='><span style="color: inherit; border: none; background-color: transparent;">'+d+"</span>";if(j.items){e+=this.loadItems(j.items)}e+="</li>";return e},ensureVisible:function(d){if(d==null||d==undefined){return}var c=this.panel.jqxPanel("getVScrollPosition");var e=this.panel.jqxPanel("getHScrollPosition");var b=parseInt(this.host.height());var f=a(d).position().top;if(f<=c||f>=b+c){this.panel.jqxPanel("scrollTo",e,f-b+a(d).outerHeight())}},addTo:function(c,b){if(c==undefined||c==null){return}var d=this;var f=new Array();if(!a.isArray(c)){f[0]=c}else{f=c}if(this.element.innerHTML.indexOf("UL")){var e=d.host.find("ul:first")}a.each(f,function(){var k=this;var j=d._parseItem(k);if(j.length>0){if(b==undefined&&b==null){var h=a(j);e.append(h);d._createItem(h[0])}else{b=a(b);var g=b.find("ul:first");var h=null;if(g.length==0){ulElement=a("<ul></ul>");a(b).append(ulElement);h=a(j);g=b.find("ul:first");var k=d.itemMapping[b[0].id].item;k.subtreeElement=g[0];k.hasItems=true;g.addClass(d.toThemeProperty("jqx-tree-dropdown"));g.append(h);h=g.find("li:first")}else{h=a(j);g.append(h)}d._createItem(h[0])}}});d._updateItemsNavigation();d._render();this._raiseEvent("4",{items:c})},removeItem:function(b){if(b==undefined||b==null){return}var c=this;var e=b.id;if(this.element.innerHTML.indexOf("UL")){var d=c.host.find("ul:first")}a.each(c.items,function(){var f=this;if(f.element.id==e){return false}});if(this.host.find("#"+b.id).length>0){a(b).remove()}c._updateItemsNavigation();c._render();c.selectedItem=null;this._raiseEvent("5")},disableItem:function(b){if(b==null){return false}var c=this;a.each(c.items,function(){var d=this;if(d.element==b){c.collapseItem(d.element);d.disabled=true;a(d.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-selected"));a(d.titleElement).addClass(c.toThemeProperty("jqx-tree-item-disabled"));return false}})},checkItem:function(b,d){if(b==null){return false}var c=this;a.each(c.items,function(){var e=this;if(e.element==b){e.checked=d;a(e.checkBoxElement).jqxCheckBox({checked:d});return false}});this._raiseEvent("6",{element:b,checked:d})},enableItem:function(b){if(b==null){return false}var c=this;a.each(c.items,function(){var d=this;if(d.element==b){d.disabled=false;a(d.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-disabled"));return false}})},enableAll:function(){var b=this;a.each(b.items,function(){var c=this;c.disabled=false;a(c.titleElement).removeClass(b.toThemeProperty("jqx-tree-item-disabled"))})},lockItem:function(b){if(b==null){return false}var c=this;a.each(c.items,function(){var d=this;if(d.element==b){d.locked=true;return false}})},unlockItem:function(b){if(b==null){return false}var c=this;a.each(c.items,function(){var d=this;if(d.element==b){d.locked=false;return false}})},getItems:function(){return this.items},getItem:function(b){if(b==null||b==undefined){return null}var c=this.itemMapping[b.id].item;return c},isExpanded:function(b){if(b==null||b==undefined){return false}var c=this.itemMapping[b.id].item;if(c!=null){return c.isExpanded}return false},isSelected:function(b){if(b==null||b==undefined){return false}var c=this.itemMapping[b.id].item;if(c!=null){return c==this.selectedItem}return false},selectItem:function(b){if(this.disabled){return}var c=this;if(b==null||b==undefined){if(c.selectedItem!=null){a(c.selectedItem.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-selected"));c.selectedItem=null}return}if(this.selectedItem!=null&&this.selectedItem.element==b){return}a.each(c.items,function(){var d=this;if(!d.disabled){if(d.element==b){if(c.selectedItem==null||(c.selectedItem!=null&&c.selectedItem.titleElement!=d.titleElement)){if(c.selectedItem!=null){a(c.selectedItem.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-selected"))}a(d.titleElement).addClass(c.toThemeProperty("jqx-tree-item-selected"));c.selectedItem=d}}}});this._raiseEvent("2",{element:b})},collapseAll:function(){var c=this;var b=c.items;a.each(b,function(){var d=this;if(d.isExpanded==true){c._collapseItem(c,d)}})},expandAll:function(){var b=this;a.each(this.items,function(){var c=this;if(c.hasItems){b._expandItem(b,c)}})},collapseItem:function(b){if(b==null){return false}var c=this;a.each(this.items,function(){var d=this;if(d.isExpanded==true&&d.element==b){c._collapseItem(c,d);return false}});return true},expandItem:function(b){if(b==null){return false}var c=this;a.each(c.items,function(){var d=this;if(d.isExpanded==false&&d.element==b&&!d.disabled&&!d.locked){c._expandItem(c,d);if(d.parentElement){c.expandItem(d.parentElement)}}});return true},_getClosedSubtreeOffset:function(c){var b=a(c.subtreeElement);var e=-b.outerHeight();var d=-b.outerWidth();d=0;return{left:d,top:e}},_collapseItem:function(g,k,d,b){if(g==null||k==null){return false}if(k.disabled){return false}if(g.disabled){return false}if(g.locked){return false}var e=a(k.subtreeElement);var l=this._getClosedSubtreeOffset(k);var h=l.top;var c=l.left;$treeElement=a(k.element);var f=g.animationHideDelay;f=0;if(e.data("timer").show!=null){clearTimeout(e.data("timer").show);e.data("timer").show=null}var j=function(){k.isExpanded=false;e.slideUp(g.animationHideDuration,function(){var m=a(k.arrow);if(m.length>0){m.removeClass();m.addClass(g.toThemeProperty("jqx-tree-item-arrow-collapse"))}g._raiseEvent("1",{element:k.element})})};if(f>0){e.data("timer").hide=setTimeout(function(){j()},f)}else{j()}},getSubItems:function(j,h){if(j==null){return false}var g=this;var b=new Array();if(h!=null){a.extend(b,h)}var c=j;var f=this.treeElements[c];var e=a(f.subtreeElement);var d=e.find(".jqx-tree-item");a.each(d,function(){b[this.id]=g.treeElements[this.id];var k=g.getSubItems(this.id,b);a.extend(b,k)});return b},_anyOpenedTopLevelItems:function(){for(i=0;i<this.items.length;i++){if(this.items[i].level==0&&this.items[i].element.className.indexOf(this.toThemeProperty("jqx-tree-item-selected"))!=-1){return true}}return false},_getOpenedTopLevelItems:function(){for(i=0;i<this.items.length;i++){if(this.items[i].level==0&&this.items[i].element.className.indexOf(this.toThemeProperty("jqx-tree-item-selected"))!=-1){return this.items[i]}}return null},_getSiblings:function(c){var d=new Array();var b=0;for(i=0;i<this.items.length;i++){if(this.items[i]==c){continue}if(this.items[i].parentId==c.parentId&&this.items[i].hasItems){d[b++]=this.items[i]}}return d},_getOpenedOnLevelItems:function(b){var c=b.level;for(i=0;i<this.items.length;i++){if(this.items[i]==b){continue}if(this.items[i].level==c&&(this.items[i].element.className.indexOf(this.toThemeProperty("jqx-tree-item-selected"))!=-1||this.items[i].element.className.indexOf(this.toThemeProperty("jqx-tree-item-selected"))!=-1||this.items[i].element.className.indexOf(this.toThemeProperty("jqx-tree-item-hover"))!=-1||this.items[i].element.className.indexOf(this.toThemeProperty("jqx-tree-item-hover"))!=-1)){return this.items[i]}}return null},_expandItem:function(f,e){if(f==null||e==null){return false}if(e.isExpanded){return false}if(e.locked){return false}if(e.disabled){return false}if(f.disabled){return false}var d=a(e.subtreeElement);if(d!=null){}if((d.data("timer"))!=null&&d.data("timer").hide!=null){clearTimeout(d.data("timer").hide)}var c=a(e.element);var h=0;var g=0;if(parseInt(d.css("top"))==h){e.isExpanded=true;return}var b=a(e.arrow);if(b.length>0){b.removeClass();b.addClass(f.toThemeProperty("jqx-tree-item-arrow-expand"))}d.slideDown(f.animationShowDuration,f.easing,function(){e.isExpanded=true;f._raiseEvent("0",{element:e.element})})},_initialize:function(e,b){var d=this;var c=0;this.host.removeClass(d.toThemeProperty("jqx-tree-vertical"));this.host.removeClass(d.toThemeProperty("jqx-tree"));this.host.addClass(d.toThemeProperty("jqx-tree"));this.host.addClass(d.toThemeProperty("jqx-tree-vertical"));a.each(this.items,function(){var h=this;$element=a(h.element);var g=null;var f=a(h.arrow);if(f.length>0){f.unbind("hover");f.remove()}g=a('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');g.prependTo($element);g.css("float","left");if(!h.isExpanded){g.addClass(d.toThemeProperty("jqx-tree-item-arrow-collapse"))}else{g.addClass(d.toThemeProperty("jqx-tree-item-arrow-expand"))}$element.addClass(d.toThemeProperty("jqx-disableselect"));g.addClass(d.toThemeProperty("jqx-disableselect"));g.click(function(){if(!h.isExpanded){d._expandItem(d,h)}else{d._collapseItem(d,h)}return false});d.addHandler(g,"selectstart",function(){return false});d.addHandler(g,"mouseup",function(){return false});g.hover(function(){g.removeClass();if(h.isExpanded){g.addClass(d.toThemeProperty("jqx-tree-item-arrow-expand-hover"))}else{g.addClass(d.toThemeProperty("jqx-tree-item-arrow-collapse-hover"))}},function(){g.removeClass();if(h.isExpanded){g.addClass(d.toThemeProperty("jqx-tree-item-arrow-expand"))}else{g.addClass(d.toThemeProperty("jqx-tree-item-arrow-collapse"))}});h.hasItems=a(h.element).find("li").length>0;h.arrow=g[0];if(!h.hasItems){g.css("visibility","hidden")}$element.css("float","none")})},_getOffset:function(b){var f=a(window).scrollTop();var h=a(window).scrollLeft();var c=a.jqx.mobile.isSafariMobileBrowser();var g=a(b).offset();var e=g.top;var d=g.left;if(c!=null&&c){return{left:d-h,top:e-f}}else{return a(b).offset()}},_renderHover:function(c,e,b){var d=this;if(!b){a(e.titleElement).unbind("hover");a(e.titleElement).hover(function(){if(!e.disabled&&d.enableHover&&!d.disabled){a(e.titleElement).addClass(d.toThemeProperty("jqx-tree-item-hover"))}},function(){if(!e.disabled&&d.enableHover&&!d.disabled){a(e.titleElement).removeClass(d.toThemeProperty("jqx-tree-item-hover"))}})}},_render:function(g,h){var l=1000;var e=[5,5];var k=this;a.data(k.element,"animationHideDelay",k.animationHideDelay);var f=a.jqx.mobile.isTouchDevice();a.data(document.body,"treeel",this);this.host.css("visibility","visible");this._initialize();if(f&&this.toggleMode=="dblclick"){this.toggleMode="click"}a.each(this.items,function(){var p=this;var o=a(p.element);if(k.enableRoundedCorners){o.addClass(k.toThemeProperty("jqx-rc-all"))}k.removeHandler(a(p.checkBoxElement),"click");k.addHandler(a(p.checkBoxElement),"click",function(r){this.treeItem.checked=!this.treeItem.checked;k.checkItem(this.treeItem.element,this.treeItem.checked);if(k.hasThreeStates){k.checkItems(this.treeItem,this.treeItem)}return false});k.removeHandler(o,"mousedown");k.removeHandler(o,"mousedown");k.removeHandler(o,"mouseenter");k.removeHandler(o,"mouseleave");k.removeHandler(o,"mousedown");k.removeHandler(o,"mouseup");k.removeHandler(o,"selectstart");k._renderHover(o,p,f);var n=a(p.subtreeElement);if(n.length>0){var q=p.isExpanded?"block":"none";n.css({overflow:"hidden",display:q});n.data("timer",{})}k.removeHandler(a(p.titleElement),"dblclick");k.removeHandler(a(p.titleElement),"click");k.addHandler(a(p.titleElement),"mouseup",function(r){return false});k.addHandler(a(p.titleElement),"selectstart",function(r){return false});if(a.browser.opera){k.removeHandler(a(p.titleElement),"mousedown");k.addHandler(a(p.titleElement),"mousedown",function(r){return false})}if(k.toggleMode!="click"){k.addHandler(a(p.titleElement),"click",function(r){k.selectItem(p.element);if(k.panel!=null){k.panel.jqxPanel({focused:true})}})}k.addHandler(a(p.titleElement),k.toggleMode,function(r){if(n.length>0){clearTimeout(n.data("timer").hide)}if(k.panel!=null){k.panel.jqxPanel({focused:true})}if(n!=null){n.stop()}k.selectItem(p.element);k.panel.jqxPanel({autoUpdate:false});if(n.length>0){if(!p.isExpanded){k._expandItem(k,p)}else{k._collapseItem(k,p,true)}}k.panel.jqxPanel({autoUpdate:true});return false})});if(this.host.jqxPanel){this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');var b=this.host.find("div:first");var m="fixed";if(this.height==null||this.height=="auto"){m="wrap"}b.jqxPanel({theme:this.theme,autoUpdate:true,sizeMode:m});if(a.browser.msie&&a.browser.version<8){var c=0;a.each(this.items,function(){c=Math.max(c,this.level)});var d=this.host.find("ul:first").width();this.host.find("ul:first").width(d+c*20)}else{var j=this.host.find("ul:first");if(j.width()<this.host.width()-18){j.width(this.host.width()-18)}}b[0].className="";this.panel=b}this._raiseEvent("3",this)},createID:function(){var b=Math.random()+"";b=b.replace(".","");b="99"+b;b=b/1;while(this.items[b]){b=Math.random()+"";b=b.replace(".","");b=b/1}return"treeItem"+b},createTree:function(b){if(b==null){return}var d=this;var f=a(b).find("li");var c=0;this.items=new Array();this.itemMapping=new Array();a(b).addClass(d.toThemeProperty("jqx-tree-dropdown-root"));for(var e=0;e<f.length;e++){this._createItem(f[e])}this._updateItemsNavigation();this._updateCheckStates()},_updateCheckStates:function(){var b=this;if(b.hasThreeStates){a.each(this.items,function(){b._updateCheckState(this)})}else{a.each(this.items,function(){if(this.checked==null){b.checkItem(this.element,false)}})}},_updateCheckState:function(e){if(e==null||e==undefined){return}var d=this;var c=0;var f=false;var b=0;var g=a(e.element).find("li");b=g.length;if(e.checked&&b>0){a.each(g,function(h){var k=d.itemMapping[this.id].item;var j=k.element.getAttribute("item-checked");if(j==undefined||j==null||j=="true"||j==true){d.checkItem(k.element,true)}})}a.each(g,function(h){var j=d.itemMapping[this.id].item;if(j.checked!=false){if(j.checked==null){f=true}c++}});if(b>0){if(c==b){this.checkItem(e.element,true)}else{if(c>0){this.checkItem(e.element,null)}else{this.checkItem(e.element,false)}}}},_updateItemsNavigation:function(){var f=this.host.find("ul:first");var e=a(f).find("li");var c=0;for(i=0;i<e.length;i++){var b=e[i];var d=this.itemMapping[b.id].item;if(i>0){d.prevItem=this.itemMapping[e[i-1].id].item}if(i<e.length-1){d.nextItem=this.itemMapping[e[i+1].id].item}}},_createItem:function(c){if(c==null||c==undefined){return}var l=c.id;if(!l){l=this.createID()}var s=c;s.id=l;var o=this.items.length;this.items[o]=new a.jqx._jqxTree.jqxTreeItem();this.treeElements[l]=this.items[o];o=this.items.length;var p=0;var u=this;var e=null;a(s).children().each(function(){if(this.tagName=="ul"||this.tagName=="UL"){u.items[o-1].subtreeElement=this;a(this).addClass(u.toThemeProperty("jqx-tree-dropdown"));return false}});a(s).parents().each(function(){if((this.tagName=="li"||this.tagName=="LI")){p=this.id;e=this;return false}});var n=c.getAttribute("item-expanded");if(n==null||n==undefined||(n!="true"&&n!=true)){n=false}else{n=true}var t=c.getAttribute("item-locked");if(t==null||t==undefined||(t!="true"&&t!=true)){t=false}else{t=true}var m=c.getAttribute("item-selected");if(m==null||m==undefined||(m!="true"&&m!=true)){m=false}else{m=true}var d=c.getAttribute("item-disabled");if(d==null||d==undefined||(d!="true"&&d!=true)){d=false}else{d=true}var g=c.getAttribute("item-checked");if(g==null||g==undefined||(g!="true"&&g!=true)){g=false}else{g=true}var v=c.getAttribute("item-title");if(v==null||v==undefined||(v!="true"&&v!=true)){v=false}var h=c.getAttribute("item-label");var q=this.items[o-1];q.id=l;q.parentId=p;q.disabled=d;q.parentElement=e;q.element=c;q.locked=t;q.selected=m;q.checked=g;q.isExpanded=n;this.itemMapping[o-1]={element:s,item:q};this.itemMapping[s.id]=this.itemMapping[o-1];var f=a(c).find('[item-title="true"]').length>0;var r=a(s).find('[item-title="true"]').parents("li:first")[0]==s;if(!f||!r){if(a(a(s)[0].firstChild).length>0){a(a(s)[0].firstChild).wrap("<span/>");q.titleElement=a(s)[0].firstChild;if(a.browser.msie&&a.browser.version<8){a(a(s)[0].firstChild).css("display","inline-block")}}else{a(a(s)[0]).append(a("<span>Item</span>"));a(a(s)[0].firstChild).wrap("<span/>");q.titleElement=a(s)[0].firstChild;if(a.browser.msie&&a.browser.version<8){a(a(s)[0].firstChild).css("display","inline-block")}}}else{var b=a(s).find('[item-title="true"]');b.wrap("<span/>");if(a.browser.msie&&a.browser.version<8){a(a(s)[0].firstChild).css("display","inline-block")}q.titleElement=b[0]}a(q.titleElement).addClass(this.toThemeProperty("jqx-rc-all"));if(h==null||h==undefined){h=q.titleElement;q.label=q.titleElement.innerHTML}else{q.label=h}if(this.checkboxes){var j=a('<div style="float: left; width: 18px; height: 18px; margin-right: 2px;" tabIndex=0 class="chkbox"/>');if(a.browser.msie&&a.browser.version<8){a(s).prepend(j);j.css("float","left")}else{a(s).prepend(j)}j.jqxCheckBox({checked:q.checked,animationShowDelay:0,animationHideDelay:0,disabled:d,theme:this.theme});q.checkBoxElement=j[0];j[0].treeItem=q}if(d){this.disableItem(q.element)}if(m){this.selectItem(q.element)}q.level=a(c).parents("li").length;a(s).addClass(this.toThemeProperty("jqx-tree-item-li"));a(q.titleElement).addClass(this.toThemeProperty("jqx-tree-item"));if(a.browser.msie&&a.browser.version<8){a(s).css("margin","2px");a(s).css("padding","2px")}q.hasItems=a(c).find("li").length>0},destroy:function(){this.host.removeClass()},_raiseEvent:function(f,c){if(c==undefined){c={owner:null}}var d=this.events[f];args=c;args.owner=this;var e=new jQuery.Event(d);e.owner=this;e.args=args;var b=this.host.trigger(e);return b},getTop:function(b){var c=b.offsetTop;while((b=b.offsetParent)!=null){if(b.tagName!="HTML"){c+=(b.offsetTop-b.scrollTop);if(document.all){c+=b.clientTop}}}return c},getLeft:function(b){var c=b.offsetLeft;while((b=b.offsetParent)!=null){if(b.tagName!="HTML"){c+=b.offsetLeft;if(document.all){c+=b.clientLeft}}}return c},propertyChangedHandler:function(b,d,g,f){if(this.isInitialized==undefined||this.isInitialized==false){return}if(d=="width"||d=="height"){b.refresh();b._initialize()}if(d=="source"){if(this.source!=null){var c=this.loadItems(this.source);this.element.innerHTML=c;var e=this.host.find("ul:first");if(e.length>0){this.createTree(e[0]);this._render()}}}if(d=="hasThreeStates"){this._render();this._updateCheckStates()}}})})(jQuery);(function(a){a.jqx._jqxTree.jqxTreeItem=function(e,d,b){var c={label:null,id:e,parentId:d,parentElement:null,parentItem:null,disabled:false,selected:false,locked:false,checked:false,level:0,isExpanded:false,hasItems:false,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null};return c}})(jQuery);