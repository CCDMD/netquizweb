/*
Copyright (c) 2012 jqWidgets.
http://jqwidgets.com/license/
*/

(function(b){b.jqx.jqxWidget("jqxGrid","",{});b.extend(b.jqx._jqxGrid.prototype,{defineInstance:function(){this.disabled=false;this.width=600;this.height=400;this.pagerheight=28;this.groupsheaderheight=34;this.pagesize=10;this.pagesizeoptions=["5","10","20"];this.rowsheight=25;this.columnsheight=25;this.groupindentwidth=30;this.rowdetails=false;this.enablerowdetailsindent=true;this.initrowdetails=null;this.pageable=false;this.groupable=false;this.sortable=false;this.altrows=true;this.altstart=1;this.altstep=1;this.showrowdetailscolumn=true;this.groups=[];this.groupsrenderer=null;this.groupcolumnrenderer=null;this.groupsexpandedbydefault=false;this.pagerrenderer=null;this.columns=[];this.selectedrowindex=-1;this.selectedrowindexes=new Array();this.source={beforeprocessing:null,loaderror:null,data:null,datatype:"xml",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:true,sortcolumn:null,sortdirection:null,sortcomparer:null};this.dataview=null;this.updatedelay=0;this.autoheight=false;this.showheader=true;this.showgroupsheader=true;this.closeablegroups=true;this.scrollbarsize=15;this.virtualmode=false;this.sort=null;this.columnsmenu=true;this.columnsmenuwidth=15;this.sorttogglestates=2;this.rendergridrows=null;this.enableanimations=true;this.enabletooltips=true;this.selectionmode="singlerow";this.enablehover=true;this.loadingerrormessage="The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.";this._updating=false;this._pagescache=new Array();this._pageviews=new Array();this._cellscache=new Array();this._rowdetailscache=new Array();this._rowdetailselementscache=new Array();this._requiresupdate=false;this._hasOpenedMenu=false;this.events=["initialized","rowclick","rowselect","rowunselect","groupexpand","groupcollapse","sort","columnclick","cellclick","pagechanged","pagesizechanged","bindingcomplete","groupschanged",]},createInstance:function(e){var k=b("<div tabIndex=0 style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' tabIndex=1 style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='groupsheader' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' tabIndex=2 style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/><div id='pager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div></div></div></div>");this.host.css("tabIndex",1);this.host.append(k);this.host.addClass(this.toThemeProperty("jqx-grid"));this.host.addClass(this.toThemeProperty("jqx-reset"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.wrapper=this.host.find("#wrapper"+this.element.id);this.content=this.host.find("#content"+this.element.id);this.content.addClass(this.toThemeProperty("jqx-reset"));var h=this.host.find("#verticalScrollBar"+this.element.id);var g=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-grid-bottomright"));if(!h.jqxScrollBar){alert("jqxscrollbar is not loaded.");return}this.vScrollBar=h.jqxScrollBar({vertical:true,step:5,largestep:30,theme:this.theme,_triggervaluechanged:false});this.hScrollBar=g.jqxScrollBar({vertical:false,step:5,theme:this.theme,triggervaluechanged:false});this.pager=this.host.find("#pager");this.pager.addClass(this.toThemeProperty("jqx-grid-pager"));this.groupsheader=this.host.find("#groupsheader");this.groupsheader.addClass(this.toThemeProperty("jqx-grid-groups-header"));this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility","hidden");this.vScrollInstance=b.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=b.data(this.hScrollBar[0],"jqxScrollBar").instance;this.gridtable=null;this.dataloadelement=b('<div style="z-index: 9999999; width: 100%; height: 100%;" class="'+this.toThemeProperty("jqx-grid-load")+'"</div>')[0];this.content.append(this.dataloadelement);this.localizestrings();this.databind(this.source);if(this.pageable){this._initpager()}var f=this;if(this.virtualmode&&this.rendergridrows){var d={startindex:0,endindex:this.dataview.pagesize};this.source.recordstartindex=0;this.rendergridrows(d)}this.content.bind("mousedown",function(){f.content[0].scrollTop=0;f.content[0].scrollLeft=0;f.gridcontent[0].scrollLeft=0;f.gridcontent[0].scrollTop=0});this.content.bind("scroll",function(l){f.content[0].scrollTop=0;f.content[0].scrollLeft=0;f.gridcontent[0].scrollLeft=0;f.gridcontent[0].scrollTop=0;return false});this.host.addClass("jqx-disableselect");this.content.addClass("jqx-disableselect")},_initmenu:function(){var v=this;if(this.host.jqxMenu){if(this.gridmenu){this.gridmenu.jqxMenu("destroy");this.gridmenu.remove()}this.menuitemsarray=new Array();this.gridmenu=b('<div id="'+this.element.id+'" style="z-index: 9999999999999;"></div>');this.host.append(this.gridmenu);var h=b("<ul></ul>");var t='<div class="jqx-grid-sortasc-icon"></div>';var l=b("<li>"+t+this.gridlocalization.sortascendingstring+"</li>");var w='<div class="jqx-grid-sortdesc-icon"></div>';var f=b("<li>"+w+this.gridlocalization.sortdescendingstring+"</li>");var k='<div class="jqx-grid-sortremove-icon"></div>';var g=b("<li>"+k+this.gridlocalization.sortremovestring+"</li>");var r='<div class="jqx-grid-groupby-icon"></div>';var e=b("<li>"+r+this.gridlocalization.groupbystring+"</li>");var d=b("<li>"+r+this.gridlocalization.groupremovestring+"</li>");var u=this.gridlocalization.sortascendingstring.length;var p=this.gridlocalization.sortascendingstring;if(this.gridlocalization.sortdescendingstring.length>u){u=this.gridlocalization.sortdescendingstring.length;p=this.gridlocalization.sortdescendingstring}if(this.gridlocalization.sortremovestring.length>u){u=this.gridlocalization.sortremovestring.length;p=this.gridlocalization.sortremovestring}if(this.groupable){if(this.gridlocalization.groupbystring.length>u){u=this.gridlocalization.groupbystring.length;p=this.gridlocalization.groupbystring}if(this.gridlocalization.groupremovestring.length>u){u=this.gridlocalization.groupremovestring.length;p=this.gridlocalization.groupremovestring}}var o=200;p=b.trim(p).replace(/\&nbsp\;/ig,"").replace(/\ \;/ig,"");var s=b("<span>"+p+"</span>");this.host.append(s);o=s.outerWidth()+80;s.remove();if(this.sortable){h.append(l);this.menuitemsarray[0]=l[0];h.append(f);this.menuitemsarray[1]=f[0];h.append(g);this.menuitemsarray[2]=g[0]}if(this.groupable){h.append(e);this.menuitemsarray[3]=e[0];h.append(d);this.menuitemsarray[4]=d[0]}this.gridmenu.append(h);var n=this.menuitemsarray.length<4?88:140;if(this.menuitemsarray[0]==undefined){n=65}this.gridmenu.jqxMenu({width:o,height:n,autoOpenPopup:false,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});this._handlemenueevents()}else{this.columnsmenu=false}},_handlemenueevents:function(){var d=this;this.removeHandler(this.gridmenu,"closed");this.addHandler(this.gridmenu,"closed",function(e){d._closemenu()});this.removeHandler(this.gridmenu,"itemclick");this.addHandler(this.gridmenu,"itemclick",function(g){var f=g.args;for(i=0;i<d.menuitemsarray.length;i++){var h=d.menuitemsarray[i];if(f==h){var k=b.data(document.body,"contextmenu"+d.element.id);var e=k.column;if(k!=null){switch(i){case 0:d.sortby(e.datafield,"ascending",null);break;case 1:d.sortby(e.datafield,"descending",null);break;case 2:d.sortby(e.datafield,null,null);break;case 3:d.addgroup(e.datafield);break;case 4:d.removegroup(e.datafield);break}}break}}})},getdatainformation:function(){return{rowscount:this.dataview.totalrecords,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.dataview.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},removesort:function(){this.sortby(null)},sortby:function(e,g,f){if(this._loading){alert(this.loadingerrormessage);return false}if(e==null){g=null;e=this.sortcolumn}if(e){var d=this;if(f==undefined&&d.source.sortcomparer!=null){f=d.source.sortcomparer}if(g=="a"||g=="asc"||g=="ascending"||g==true){ascending=true}else{ascending=false}var h=d.getcolumn(e);if(h==undefined||h==null){return}if(g!=null){d.sortdirection={ascending:ascending,descending:!ascending}}else{d.sortdirection={ascending:false,descending:false}}if(d.sort){d.sort(e,g)}else{d.dataview.sortby(e,g,f)}if(g!=null){d.sortcolumn=e}else{d.sortcolumn=null}if(d.groupable&&d.groups.length>0){d._ren(true,false,false);d._updategroupheadersbounds()}else{if(d.pageable){d.dataview.updateview()}d._updaterowsproperties();d.rgrc(true)}d._raiseEvent(6,{sortinformation:d.getsortinformation()})}},_updaterowsproperties:function(){this._updatehiddenrows();this._updaterowheights();this._updaterowdetails()},_updatehiddenrows:function(){var e=this;this.hiddens=new Array();var d=this.hiddenboundrows;b.each(d,function(g){if(this.index!=undefined){var f=this.index;var h=e.getrowvisibleindex(g);e.hiddens[h]=this.hidden}})},_updaterowheights:function(){var e=this;this.heights=new Array();var d=this.heightboundrows;b.each(d,function(g){if(this.index!=undefined){var f=this.index;var h=e.getrowvisibleindex(g);e.heights[h]=this.height}})},_updaterowdetails:function(){var d=this;this.details=new Array();var e=this.detailboundrows;b.each(e,function(g){if(this.index!=undefined){var f=this.index;var h=d.getrowvisibleindex(g);d.details[h]=this.details}})},getsortcolumn:function(){if(this.sortcolumn){return this.sortcolumn}return null},addgroup:function(e){if(e){var d=this;d.groups[d.groups.length]=e;d.refreshdata();this._raiseEvent(12,{type:"Add"})}},insertgroup:function(f,e){if(f!=undefined&&f!=null&&f>=0&&f<=this.groups.length){if(e){var d=this;d.groups.splice(f,0,e);d.refreshdata();this._raiseEvent(12,{type:"Insert"})}}},_insertaftergroup:function(f,e){var d=this._getGroupIndexByDataField(f);this.insertgroup(d+1,e)},_insertbeforegroup:function(f,e){var d=this._getGroupIndexByDataField(f);this.insertgroup(d,e)},removegroupat:function(e){if(e>=0&&e!=null&&e!=undefined){var d=this;d.groups.splice(e,1);d.refreshdata();this._raiseEvent(12,{type:"Remove"});return true}return false},removegroup:function(e){if(e==null){return false}var d=this.groups.indexOf(e.toString());return this.removegroupat(d)},_getmenuitembyindex:function(d){if(d==undefined){return null}return this.menuitemsarray[d]},_initpager:function(){var n=this;var e=this.gridlocalization.pagergotopagestring;var l=this.gridlocalization.pagerrangestring;var r=this.gridlocalization.pagershowrowsstring;var o=(this.pagerheight-17)/2;this.pagerdiv=this.pagerdiv||b('<div style="width: 100%; height: 100%; position: relative;"></div>');if(!this.pageable){this.pagerdiv.remove();this.vScrollBar.jqxScrollBar({thumbSize:0});return}if(!this.pagerrenderer){this.pagerdiv.css("top",o);this.pagergotoinput=this.pagergotoinput||b('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>');this.pagergoto=this.pagergoto||b('<div style="float: right; margin-right: 7px;"></div>');this.pagerrightbutton=this.pagerrightbutton||b('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>');this.pagerleftbutton=this.pagerleftbutton||b('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>');this.pagerdetails=this.pagerdetails||b('<div style="margin-right: 7px; float: right;"></div>');this.pagershowrows=this.pagershowrows||b('<div style="margin-right: 7px; float: right;"></div>');this.pagershowrowscombo=this.pagershowrowscombo||b('<div style="margin-top: 0px; margin-right: 7px; float: right;"></div>');this.pagerdiv.children().remove();this.pagerleftbutton.attr("title",this.gridlocalization.pagerpreviousbuttonstring);this.pagerrightbutton.attr("title",this.gridlocalization.pagernextbuttonstring);this.pagerdiv.append(this.pagerrightbutton);this.pagerdiv.append(this.pagerleftbutton);this.pagerrightbutton.jqxButton({theme:this.theme});this.pagerleftbutton.jqxButton({theme:this.theme});this.pagerleftbutton.find(".icon-arrow-left").remove();this.pagerrightbutton.find(".icon-arrow-right").remove();var f=b("<div style='width: 27px; height: 15px;'></div>");f.addClass(this.toThemeProperty("icon-arrow-left"));this.pagerleftbutton.wrapInner(f);var k=b("<div style='width: 27px; height: 15px;'></div>");k.addClass(this.toThemeProperty("icon-arrow-right"));this.pagerrightbutton.wrapInner(k);this.pagerdiv.append(this.pagerdetails);this.pagerdiv.append(this.pagershowrowscombo);this.pagerdiv.append(this.pagershowrows);this.pagerdiv.append(this.pagergotoinput);this.pagerdiv.append(this.pagergoto);var d=this.pagesizeoptions;if(!this.pagershowrowscombo.jqxDropDownList){alert("jqxdropdownlist is not loaded.");return}this.pagershowrowscombo.jqxDropDownList({source:d,autoHeight:true,width:44,height:16,theme:this.theme});var h=0;for(i=0;i<d.length;i++){if(this.pagesize>=d[i]){h=i}}this.pagershowrows[0].innerHTML=r;this.pagergoto[0].innerHTML=e;this.updatepagerdetails();this.pager.append(this.pagerdiv);this.pagershowrowscombo.jqxDropDownList({selectedIndex:h});this.pagerpageinput=this.pagergotoinput.find("input");this.pagerpageinput.addClass(this.toThemeProperty("jqx-input"));var n=this;this.pagershowrowscombo.unbind("select");this.pagershowrowscombo.bind("select",function(v){var t=v.args.index;var w=n.dataview.pagenum*n.dataview.pagesize;var u=d[t];var x=n.pagesize;n.pagesize=parseInt(u);if(isNaN(n.pagesize)){n.pagesize=10}n.dataview.pagesize=n.pagesize;var s=Math.floor(w/n.dataview.pagesize);n.prerenderrequired=true;n._requiresupdate=true;n._raiseEvent(10,{pagenum:s,oldpagesize:x,pagesize:n.dataview.pagesize});n.gotopage(s)});var p=this.pagergotoinput.find("input");p.addClass(this.toThemeProperty("jqx-grid-pager-input"));p.addClass(this.toThemeProperty("jqx-rc-all"));p.unbind("keydown");p.unbind("change");p.bind("keydown",function(s){if(s.keyCode>=65&&s.keyCode<=90){return false}if(s.keyCode=="13"){var t=p.val();t=parseInt(t);if(!isNaN(t)){n.gotopage(t)}return false}});p.bind("change",function(){var s=p.val();s=parseInt(s);if(!isNaN(s)){n.gotopage(s)}});this.addHandler(this.pagerrightbutton,"mousedown",function(){k.addClass(n.toThemeProperty("icon-arrow-right-selected"))});this.addHandler(this.pagerrightbutton,"mouseup",function(){k.removeClass(n.toThemeProperty("icon-arrow-right-selected"))});this.addHandler(this.pagerleftbutton,"mousedown",function(){f.addClass(n.toThemeProperty("icon-arrow-left-selected"))});this.addHandler(this.pagerleftbutton,"mouseup",function(){f.removeClass(n.toThemeProperty("icon-arrow-left-selected"))});this.addHandler(this.pagerrightbutton,"click",function(){n.gotonextpage()});this.addHandler(this.pagerleftbutton,"click",function(){n.gotoprevpage()})}else{this.pagerdiv.children().remove();var g=this.pagerrenderer();if(g!=null){this.pagerdiv.append(b(g))}this.pager.append(this.pagerdiv)}this.vScrollBar.jqxScrollBar({thumbSize:this.host.height()/5});this.vScrollBar.jqxScrollBar("refresh");this._arrange()},_initgroupsheader:function(){this.groupsheader.css("visibility","hidden");if(this._groupsheader()){this.groupsheader.css("visibility","visible");var g=this;var e=this.gridlocalization.groupsheaderstring;this.groupsheaderdiv=this.groupsheaderdiv||b('<div style="width: 100%; position: relative;"></div>');this.groupsheaderdiv.height(this.groupsheaderheight);this.groupsheaderdiv.css("top",0);this.groupsheader.append(this.groupsheaderdiv);this.groupheadersbounds=new Array();var f=this.groups.length;this.groupsheaderdiv.children().remove();this.groupsheaderdiv[0].innerHTML="";var d=new Array();if(f>0){b.each(this.groups,function(n){var s=this;var r=g._getColumnText(this);var p=g._rengroupcolumn(r,s);p.addClass(g.toThemeProperty("jqx-grid-group-column"));g.groupsheaderdiv.append(p);if(g.closeablegroups){var o=b(p.find(".icon-close"));g.addHandler(o,"click",function(){g.removegroupat(n);return false})}if(g.sortable){g.addHandler(p,"click",function(){var t=g.getcolumn(s);if(t!=null){g._ts(t)}return false})}d[d.length]=p;g._handlegroupstocolumnsdragdrop(this,p);if(n<f-1){var k=p.height();var l=b('<div style="float: left; position: relative;"></div>');l.width(g.groupindentwidth/3);l.height(1);l.css("top",k/2);l.addClass(g.toThemeProperty("jqx-grid-group-column-line"));g.groupsheaderdiv.append(l)}})}else{var h=b('<div style="position: relative;">'+e+"</div>");this.groupsheaderdiv.append(h)}this._groupheaders=d;this._updategroupheadersbounds()}},_updategroupheadersbounds:function(){var e=this;var d=this.groupsheaderdiv.children().outerHeight();var f=(this.groupsheader.height()-d)/2;this.groupsheaderdiv.css("top",f);this.groupsheaderdiv.css("left",f);b.each(this._groupheaders,function(h){var g=this.offset();e.groupheadersbounds[h]={left:g.left,top:g.top,width:this.outerWidth(),height:this.outerHeight(),index:h}})},_closemenu:function(){if(this._hasOpenedMenu){if(this.gridmenu!=null){this.gridmenu.jqxMenu("close")}var e=b.data(document.body,"contextmenu"+this.element.id);var d=16;if(e!=null){if(this.enableanimations){b(e.columnsmenu).animate({"margin-left":0},"fast",function(){b(e.columnsmenu).css("display","none")})}else{b(e.columnsmenu).css("display","none")}b(e.column.sortasc).css("margin-left",-d);b(e.column.sortdesc).css("margin-left",-d);b.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=false}},_rengroupcolumn:function(h,k){var f=b('<div style="float: left; position: relative;"></div>');if(this.groupcolumnrenderer!=null){f[0].innerHTML=this.groupcolumnrenderer(h);f.addClass(this.toThemeProperty("jqx-grid-group-column"))}if(this.closeablegroups){if(f[0].innerHTML==""){f[0].innerHTML='<a style="float: left;" href="#">'+h+"</a>"}var e='<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("icon-close")+'"></div></div>';f[0].innerHTML+=e}else{if(f[0].innerHTML==""){f[0].innerHTML='<a href="#">'+h+"</a>"}}if(this.sortable){var g=b('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>');var d=b('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.closeablegroups){var g=b('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>');var d=b('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>')}g.css("display","none");d.css("display","none");f.append(g);f.append(d);b.data(document.body,"groupsortelements"+k,{sortasc:g,sortdesc:d})}f.addClass(this.toThemeProperty("jqx-grid-group-column"));return f},updatepagerdetails:function(){if(this.pagerdetails!=null&&this.pagerdetails.length>0){var g=this.dataview.pagenum*this.pagesize;var d=(this.dataview.pagenum+1)*this.pagesize;if(d>=this.dataview.totalrecords){d=this.dataview.totalrecords}g++;var f=this.pagergotoinput.find("input");f.val(this.dataview.pagenum);var e=Math.round(this.dataview.totalrecords/this.dataview.pagesize);if(e>1){e--}this.pagergotoinput.attr("title","0 - "+e);this.pagerdetails[0].innerHTML=g+"-"+d+this.gridlocalization.pagerrangestring+this.dataview.totalrecords}},gotopage:function(f){if(f==null||f==undefined){f=0}if(f<0){return}var e=Math.ceil(this.dataview.totalrecords/this.pagesize);if(f>=e){return}if(this.dataview.pagenum!=f||this._requiresupdate){if(this.pageable){this.dataview.pagenum=f;this.dataview.updateview();if(this.virtualmode){this.hiddens=new Array();this.expandedgroups=new Array();if(this.rendergridrows){var k=f*this.dataview.pagesize;var h=k+this.dataview.pagesize;if(k!=null&&h!=null){var d={startindex:k,endindex:h};this.rendergridrows(d);this._raiseEvent(9,{pagenum:f,pagesize:this.dataview.pagesize});return}}}this._raiseEvent(9,{pagenum:f,pagesize:this.dataview.pagesize});this._lr();this._uppv();this.tableheight=null;this._renrows(this.virtualsizeinfo);this.updatepagerdetails();if(this.autoheight){var g=this.host.height()-this._gthe();height=g+this._pageviews[0].height;if(height!=this.host.height()){this._arrange();this._uppv()}}}}},gotoprevpage:function(){if(this.dataview.pagenum>0){this.gotopage(this.dataview.pagenum-1)}else{var d=Math.ceil(this.dataview.totalrecords/this.pagesize);this.gotopage(d-1)}},gotonextpage:function(){var d=Math.ceil(this.dataview.totalrecords/this.pagesize);if(this.dataview.pagenum<d-1){this.gotopage(this.dataview.pagenum+1)}else{this.gotopage(0)}},localizestrings:function(d){this._cellscache=new Array();b.jqx.gridformat.cleardatescache();if(this._loading){alert(this.loadingerrormessage);return false}if(d!=null){if(d.pagergotopagestring){this.gridlocalization.pagergotopagestring=d.pagergotopagestring}if(d.pagershowrowsstring){this.gridlocalization.pagershowrowsstring=d.pagershowrowsstring}if(d.pagerrangestring){this.gridlocalization.pagerrangestring=d.pagerrangestring}if(d.pagernextbuttonstring){this.gridlocalization.pagernextbuttonstring=d.pagernextbuttonstring}if(d.pagerpreviousbuttonstring){this.gridlocalization.pagerpreviousbuttonstring=d.pagerpreviousbuttonstring}if(d.groupsheaderstring){this.gridlocalization.groupsheaderstring=d.groupsheaderstring}if(d.sortascendingstring){this.gridlocalization.sortascendingstring=d.sortascendingstring}if(d.sortdescendingstring){this.gridlocalization.sortdescendingstring=d.sortdescendingstring}if(d.sortremovestring){this.gridlocalization.sortremovestring=d.sortremovestring}if(d.groupbystring){this.gridlocalization.groupbystring=d.groupbystring}if(d.groupremovestring){this.gridlocalization.groupremovestring=d.groupremovestring}if(d.firstDay){this.gridlocalization.firstDay=d.firstDay}if(d.days){this.gridlocalization.days=d.days}if(d.months){this.gridlocalization.months=d.months}if(d.AM){this.gridlocalization.AM=d.AM}if(d.PM){this.gridlocalization.PM=d.PM}if(d.percentsymbol){this.gridlocalization.percentsymbol=d.percentsymbol}if(d.currencysymbol){this.gridlocalization.currencysymbol=d.currencysymbol}if(d.currencysymbolposition){this.gridlocalization.currencysymbolposition=d.currencysymbolposition}if(d.decimalseparator){this.gridlocalization.decimalseparator=d.decimalseparator}if(d.thousandsseparator){this.gridlocalization.thousandsseparator=d.thousandsseparator}this._initpager();this._initgroupsheader();this._renrows()}else{this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups"}}},scrolloffset:function(e,d){if(e==null||d==null||e==undefined||d==undefined){return}this.vScrollBar.jqxScrollBar("setPosition",e);this.hScrollBar.jqxScrollBar("setPosition",d)},beginupdate:function(){this._updating=true},resumeupdate:function(){this._updating=false;this.rgrc(true)},updating:function(){return this._updating},refresh:function(){},databind:function(e){b(this.dataloadelement).css("visibility","visible");var d=this;if(e==null){e=new Array()}if(!e.recordstartindex){e.recordstartindex=0}if(!e.recordendindex){e.recordendindex=0}if(e.loadallrecords==undefined||e.loadallrecords==null){e.loadallrecords=true}if(e.sortcomparer==undefined||e.sortcomparer==null){e.sortcomparer=null}this.dataview=this.dataview||new b.jqx.dataview();this.dataview.suspendupdate();this.dataview.pageable=this.pageable;this.dataview.groupable=this.groupable;this.dataview.groups=this.groups;this.dataview.virtualmode=this.virtualmode;this._loading=true;this.dataview.update=function(){b(d.dataloadelement).css("visibility","hidden");d._loading=false;if(d.dataview.isupdating()){d.dataview.resumeupdate(false)}if(d.pageable&&d.pagerrenderer){d._initpager()}if(d.source.sortcolumn){d.render();d.sortby(d.source.sortcolumn,d.source.sortdirection,d.source.sortcomparer)}else{var f=d.source.datatype;if(f!="local"||f!="array"){var g=d.virtualsizeinfo==null||(d.virtualsizeinfo!=null&&d.virtualsizeinfo.virtualheight==0);if(!d.virtualmode||d.pageable||g){d.render()}else{d._pagescache=new Array();d._renrows()}}}d._raiseEvent(11);if(!d.initializedcall){d._raiseEvent(0);d.initializedcall=true;if(d.ready){d.ready()}}};this.dataview.databind(e);if(this.dataview.isupdating()){this.dataview.resumeupdate(false)}this._initializeRows()},scrollto:function(e,d){if(undefined!=e){this.hScrollInstance.setPosition(e)}if(undefined!=d){this.vScrollInstance.setPosition(d)}},ensurerowvisible:function(h){var k=this._gpsz();var f=Math.floor(h/k);if(!this._pageviews[f]){this._uppv()}if(this.pageable){if(this.dataview.pagenum!=f){this.gotopage(f)}}var l=this.vScrollInstance.value;var e=this._gthe()-this.rowsheight;var d=k*(h/k-f);if(this._pageviews[f]){var n=this._pageviews[f].top;var g=n+d*this.rowsheight;if(g<l||g>l+e){this.scrollto(0,g)}}else{if(this.pageable){var g=d*this.rowsheight;if(g<l||g>l+e){this.scrollto(0,g)}}}},selectrow:function(d){this._applyrowselection(d,true)},unselectrow:function(d){this._applyrowselection(d,false)},clearselection:function(){this.selectedrowindex=-1;for(i=0;i<this.selectedrowindexes.length;i++){this._raiseEvent(3,{rowindex:this.selectedrowindexes[i]})}this.selectedrowindexes=new Array();this._renrows(this.virtualsizeinfo)},getselectedrowindex:function(){return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},_applyrowselection:function(e,d,g){if(e==null){return false}var f=this.selectedrowindex;if(this.selectionmode=="singlerow"){if(d){this._raiseEvent(2,{rowindex:e})}else{this._raiseEvent(3,{rowindex:e})}this._raiseEvent(3,{rowindex:f});this.selectedrowindexes=new Array()}var h=this.selectedrowindexes.indexOf(e);if(d){this.selectedrowindex=e;if(this.selectedrowindexes.indexOf(e)==-1){this.selectedrowindexes.push(e);if(this.selectionmode!="singlerow"){this._raiseEvent(2,{rowindex:e})}}else{if(this.selectionmode=="multiplerows"){this.selectedrowindexes.splice(h,1);this._raiseEvent(3,{rowindex:this.selectedrowindex});this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1}}}else{if(h>=0||this.selectionmode=="singlerow"){this.selectedrowindexes.splice(h,1);this._raiseEvent(3,{rowindex:this.selectedrowindex});this.selectedrowindex=-1}}if(g==undefined||g){this._renrows(this.virtualsizeinfo)}return true},setrowheight:function(e,d){if(this._loading){alert(this.loadingerrormessage);return false}if(e==null||d==null){return false}this.heightboundrows[e]={index:e,height:d};e=this.getrowvisibleindex(e);if(e<0){return false}if(this.rows.records[e]){this.rows.records[e].height=d}else{row=new a(this,null);row.height=d;this.rows.replace(e,row)}this.heights[e]=d;this.rgrc(true);return true},getrowheight:function(d){if(d==null){return null}d=this.getrowvisibleindex(d);if(d<0){return false}if(this.rows.records[d]){return this.rows.records[d].height}},setrowdetails:function(e,f,d,h){if(e==undefined||e==null||e<0){return}var g=this.dataview.generatekey();this.detailboundrows[e]={index:e,details:{rowdetails:f,rowdetailsheight:d,rowdetailshidden:h,key:g}};e=this.getrowvisibleindex(e);if(e<0){return false}return this._setrowdetails(e,f,d,h,g)},getcolumn:function(d){var e=null;if(this.columns.records){b.each(this.columns.records,function(){if(this.datafield==d){e=this;return false}})}return e},_getcolumnat:function(d){var e=this.columns.records[d];return e},_getcolumn:function(d){var e=null;b.each(this._columns,function(){if(this.datafield==d){e=this;return false}});return e},_setcolumnproperty:function(e,g,h){if(e==null||g==null||h==null){return null}var f=this.getcolumn(e);if(f==null){return}f[g]=h;var d=this._getcolumn(e);if(d!=null){d[g]=h}switch(g){case"text":this.prerenderrequired=true;this._rch();if(this._groupsheader()){this._initgroupsheader()}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"cellsalign":case"cellsformat":case"width":case"pinned":case"contenttype":this.prerenderrequired=true;this.rgrc(true);break}},_getcolumnproperty:function(d,f){if(d==null||f==null){return null}var e=this.getcolumn(d);return e[f]},setcolumncontenttype:function(e,d){this._setcolumnproperty(e,"contenttype",d)},setcolumntext:function(d,e){this._setcolumnproperty(d,"text",e)},getcolumntext:function(d){return this._getcolumnproperty(d,"text")},setcolumnsortable:function(d,e){this._setcolumnproperty(d,"sortable",e)},getcolumnsortable:function(d){return this._getcolumnproperty(d,"contenttype")},getcolumnsortable:function(d){return this._getcolumnproperty(d,"sortable")},hidecolumn:function(d){this._setcolumnproperty(d,"hidden",true)},showcolumn:function(d){this._setcolumnproperty(d,"hidden",false)},iscolumnvisible:function(d){return !this._getcolumnproperty(d,"hidden")},setcolumnhideable:function(d,e){this._setcolumnproperty(d,"hideable",e)},iscolumnhideable:function(d){return this._getcolumnproperty(d,"hideable")},setcolumngroupable:function(e,d){this._setcolumnproperty(e,"groupable",d)},iscolumngroupable:function(d){return this._getcolumnproperty(d,"groupable")},setcolumnrenderer:function(d,e){this._setcolumnproperty(d,"renderer",e)},setcolumncellsrenderer:function(d,e){this._setcolumnproperty(d,"cellsrenderer",e)},setcolumnalign:function(d,e){this._setcolumnproperty(d,"align",e)},getcolumnalign:function(d){return this._getcolumnproperty(d,"align")},setcolumncellsalign:function(d,e){this._setcolumnproperty(d,"cellsalign",e)},getcolumncellsalign:function(d){return this._getcolumnproperty(d,"cellsalign")},setcolumnwidth:function(d,f){if(f!=undefined){var e=parseInt(f);this._setcolumnproperty(d,"width",e)}},getcolumnwidth:function(d){return this._getcolumnproperty(d,"width")},pincolumn:function(d){this._setcolumnproperty(d,"pinned",true)},unpincolumn:function(d){this._setcolumnproperty(d,"pinned",false)},iscolumnpinned:function(d){return this._getcolumnproperty(d,"pinned")},setcolumncellsformat:function(d,e){this._setcolumnproperty(d,"cellsformat",e)},getcolumncellsformat:function(d){return this._getcolumnproperty(d,"cellsformat")},_setrowdetails:function(h,d,o,g,e){if(o==0){o=100}if(h==null||o==null){return false}if(e!=null){this.details[h]={rowdetails:d,rowdetailsheight:o,rowdetailshidden:g,detailskey:e}}else{var n=this.details[h]!=null?this.details[h].detailskey:null;var l={rowdetails:d,rowdetailsheight:o,rowdetailshidden:g,detailskey:n};var k=this;for(i=0;i<this.detailboundrows.length;i++){if(this.detailboundrows[i]!=undefined){var f=this.detailboundrows[i];if(f.details.key==n){f.details.rowdetailsheight=l.rowdetailsheight;f.details.rowdetailshidden=l.rowdetailshidden;f.details.rowdetails=l.rowdetails;break}}}this.details[h]=l}this.rgrc(true);return true},getrowdetails:function(d){if(d==null){return false}d=this.getrowvisibleindex(d);return this._getrowdetails(d)},_getrowdetails:function(d){if(d==null){return false}if(d<0){return false}if(this.details[d]){return this.details[d]}},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==null){return false}d=this.getrowvisibleindex(d);if(d<0){return false}var e=this._getrowdetails(d);return this._setrowdetailsvisibility(d,e,false)},hiderowdetails:function(d){if(this._loading){alert(this.loadingerrormessage);return false}d=this.getrowvisibleindex(d);if(d<0){return false}var e=this._getrowdetails(d);return this._setrowdetailsvisibility(d,e,true)},_togglerowdetails:function(g){var d=g.visibleindex;var e=this._getrowdetails(d);if(e!=null){var f=!e.rowdetailshidden;return this._setrowdetailsvisibility(d,e,f)}return false},_setrowdetailsvisibility:function(e,f,g){if(f!=null){this.details[e].rowdetailshidden=g}else{return false}var d=this.details[e];return this._setrowdetails(e,d.rowdetails,d.rowdetailsheight,d.rowdetailshidden)},getrowvisibleindex:function(d){if(d==undefined||d==null||d<0){return false}var e=this.dataview.bounditems[d];if(e==undefined){return -1}return e.visibleindex},getrootgroupscount:function(){var d=this.dataview.loadedrootgroups.length;return d},collapsegroup:function(d){return this._setrootgroupstate(d,false)},expandgroup:function(d){return this._setrootgroupstate(d,true)},collapseallgroups:function(){this._setbatchgroupstate(false)},expandallgroups:function(){this._setbatchgroupstate(true)},getgroup:function(g){var o=this.dataview.loadedrootgroups[g];if(o==null){return null}var h=this.expandedgroups[o.uniqueid].expanded;var k=o.group;var d=o.level;var e=new Array();this._getsubgroups(e,o);var n=this;var f={group:k,level:d,expanded:h,subgroups:e};if(o.subItems){var l=new Array();b.each(o.subItems,function(){var p=this.boundindex;l[l.length]=n.getrowdata(p)});if(l.length>0){f.subrows=l}}return f},_getsubgroups:function(e,o){var n=this;for(obj in o.subGroups){var k=o.subGroups[obj];var g=n.expandedgroups[k.uniqueid].expanded;var h=k.group;var d=k.level;e[e.length]={group:h,level:d,expanded:g};if(k.subItems){var l=new Array();b.each(k.subItems,function(){var p=this.boundindex;l[l.length]=n.getrowdata(p)});e[e.length-1].subrows=l}if(k.subGroups){var f=new Array();n._getsubgroups(f,k)}}return e},_setbatchgroupstate:function(d){var e=this;for(obj in this.dataview.loadedrootgroups){e._setrootgroupstate(obj,d,false,true)}this.rgrc(true);return true},_setrootgroupstate:function(f,d,g,e){if(f==undefined||f==null||f<0){return false}if(!this.groupable||this.groups.length==0){return false}var k=g!=undefined?g:true;if(f>=0&&f<this.dataview.loadedrootgroups.length){var h=this.dataview.loadedrootgroups[f];return this._setgroupstate(h,d,k,e)}return false},_togglegroupstate:function(e,f){if(e==null||e==undefined){return false}var d=this.expandedgroups[e.uniqueid];if(d==undefined){d=false}else{d=d.expanded}d=!d;return this._setgroupstate(e,d,f)},_setgroupstate:function(h,d,k,e){if(h==null||h==undefined){return false}var g=false;var f=this.expandedgroups[h.uniqueid];if(f==undefined){f={expanded:false};g=true}if(f.expanded!=d){g=true}if(g){this.expandedgroups[h.uniqueid]={expanded:d,group:h};this._setsubgroupsvisibility(this,h,!d,e);if(k){this.rgrc(true)}if(undefined==this.suspendgroupevents||this.suspendgroupevents==false){if(d){this._raiseEvent(4,{group:h.group,parentgroup:h.parentItem?h.parentItem.group:null,level:h.level,visibleindex:h.visibleindex})}else{this._raiseEvent(5,{group:h.group,parentgroup:h.parentItem?h.parentItem.group:null,level:h.level,visibleindex:h.visibleindex})}}return true}return false},_setgroupitemsvisibility:function(d,f,e){for(m=0;m<f.subItems.length;m++){d._setrowvisibility(f.subItems[m].visibleindex,e,false)}},_setsubgroupsvisibility:function(e,k,h,f){if(k.parentItem!=null){if(this.hiddens[k.parentItem.visibleindex]){return}}else{if(k.parentItem==null){if(this.hiddens[k.visibleindex]){return}}}for(subGroup in k.subGroups){var g=k.subGroups[subGroup];if(!h){e._setrowvisibility(g.visibleindex,h,false)}var d=!h;if(!f){if(e.expandedgroups[g.uniqueid]==undefined){d=false}else{d=e.expandedgroups[g.uniqueid].expanded}}else{this.expandedgroups[g.uniqueid]={expanded:d,group:g}}if(g.subGroups){if(g.subGroups.length>0){e._setsubgroupsvisibility(e,g,!d||h,f)}else{if(g.subItems.length>0){e._setgroupitemsvisibility(e,g,!d||h)}}}if(h){e._setrowvisibility(g.visibleindex,h,false)}}if(k.subItems&&k.subItems.length>0){e._setgroupitemsvisibility(e,k,h)}},hiderow:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==undefined||d==null||d<0){return false}if(d==null){return false}this.hiddenboundrows[d]={index:d,hidden:true};d=this.getrowvisibleindex(d);return this._setrowvisibility(d,true)},showrow:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==undefined||d==null||d<0){return false}if(d==null){return false}this.hiddenboundrows[d]={index:d,hidden:false};d=this.getrowvisibleindex(d);return this._setrowvisibility(d,false)},isrowhiddenat:function(d){if(d==null){return null}d=this.getrowvisibleindex(d);if(this.rows.records[d]){return this.rows.records[d].hidden}},_setrowvisibility:function(d,f,e){if(d==null){return false}this.hiddens[d]=f;if(e==undefined||e){this.rgrc(true);return true}return false},_lr:function(){if(!this._pageviews[this.dataview.pagenum]&&!this.pageable){return}var r=!this.pageable?this._pageviews[this.dataview.pagenum].top:0;if(!this.pageable&&this._pagescache[this.dataview.pagenum]!=undefined){return null}if(!this.virtualsizeinfo){return}var v=this;var l=new Array();var s=new Array();var e=v.groupable&&v.groups.length>0;var h=this.dataview.totalrecords;var p=this.virtualsizeinfo.virtualheight;var u=0;this.rows.beginupdate();var f=this.dataview.pagesize;if(this.pageable&&e){f=this.dataview.rows.length}for(i=0;i<f;i++){if(i>=this.dataview.rows.length){break}var k=this.dataview.rows[i];var w=null;if(!v.rows.records[k.visibleindex]){w=new a(v,k)}else{w=v.rows.records[k.visibleindex];w.setdata(k)}w.hidden=this.hiddens[w.visibleindex];var d=this.details[w.visibleindex];if(d){w.rowdetails=d.rowdetails;w.rowdetailsheight=d.rowdetailsheight;w.rowdetailshidden=d.rowdetailshidden}else{w.rowdetails=null}if(e&&this.pageable&&w.parentbounddata!=null){var t=l[w.parentbounddata.uniqueid];if(t!=null){var o=this._findgroupstate(t.uniqueid);this._setgroupstate(w.parentbounddata,o,false,false);w.hidden=this.hiddens[w.visibleindex]}if(t!=null&&t!=undefined){w.parentrow=t;t.subrows[t.subrows.length++]=w}}if(w.hidden){continue}var g=k.visibleindex;if(!this.heights[g]){this.heights[g]=this.rowsheight}w.height=this.heights[g];if(this.rowdetails){if(w.rowdetails&&!w.rowdetailshidden){w.height+=w.rowdetailsheight}}l[w.uniqueid]=w;s[u++]=w;w.top=r;r+=w.height;var n=g;v.rows.replace(n,w)}this.rows.resumeupdate();if(s.length>0){this._pagescache[this.dataview.pagenum]=s}},_gthe:function(){if(this.tableheight!=undefined){return this.tableheight}var e=this.host.height();if(this.columnsheader){var d=this.columnsheader.outerHeight();if(!this.showheader){d=0}}e-=d;if(this.hScrollBar.css("visibility")=="visible"){e-=this.hScrollBar.outerHeight()}if(this.pageable){e-=this.pager.outerHeight()}if(this._groupsheader()){e-=this.groupsheader.outerHeight()}if(e>0){this.tableheight=e;return e}return this.host.height()},_gpsz:function(){if(this.pageable){return this.pagesize}if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight;var d=Math.round(e/this.rowsheight);return d}if(this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0){return this.dataview.totalrows}return 100},_cvh:function(){var p=this;var e=Math.round(this.host.height())+2*this.rowsheight;realheight=this._gthe();var s=Math.round(e/this.rowsheight);this.heights=new Array();this.hiddens=new Array();this.details=new Array();this.expandedgroups=new Array();this.hiddenboundrows=new Array();this.heightboundrows=new Array();this.detailboundrows=new Array();var h=Math.max(this.dataview.totalrows,this.dataview.totalrecords);if(this.pageable){h=this.pagesize}var n=h*this.rowsheight;var o=0;var k=0;var l=0;var f=this._gpsz();var d=f*this.rowsheight;var g=0;while(g<=h+f){o+=d;if(g-f<h&&g>=h){var r=g-h;if(r>0){l-=d;this._pageviews[k-1]={top:l,height:d-r*this.rowsheight}}break}else{this._pageviews[k++]={top:l,height:d}}l=o;g+=f}this.vScrollBar.jqxScrollBar({value:0});if(n>realheight){this.vScrollBar.css("visibility","visible");this.vScrollBar.jqxScrollBar({max:n-realheight})}else{this.vScrollBar.css("visibility","hidden")}this.dataview.pagesize=f;this.dataview.updateview();return{visiblerecords:s,virtualheight:n}},_uppv:function(){if(this.updating()){return}this._pagescache=new Array();this._pageviews=new Array();this.tableheight=null;var v=this;var d=Math.round(this.host.height())+2*this.rowsheight;var w=Math.round(d/this.rowsheight);var n=Math.max(this.dataview.totalrows,this.dataview.totalrecords);var r=n*this.rowsheight;var u=0;var f=0;var o=0;var p=0;var h=0;var g=this._gpsz();if(!this.pageable){for(i=0;i<n;i++){var t={index:i,height:this.heights[i],hidden:this.hiddens[i],details:this.details[i]};if(this.heights[i]==undefined){this.heights[i]=this.rowsheight;t.height=this.rowsheight}if(this.hiddens[i]==undefined){this.hiddens[i]=false;t.hidden=false}if(this.details[i]==undefined){this.details[i]=null}if(t.height!=v.rowsheight){r-=v.rowsheight;r+=t.height}if(t.hidden){r-=t.height}else{f+=t.height;var l=0;if(this.rowdetails){if(t.details&&t.details.rowdetails&&!t.details.rowdetailshidden){l=t.details.rowdetailsheight;f+=l;r+=l}}u+=t.height+l}h++;if(h>=g||i==n-1){this._pageviews[o++]={top:p,height:f};f=0;p=u;h=0}}}else{r=this._upagv(n,r,0);if(this.autoheight){this._arrange()}}var e=this._gthe();if(r>e){if(this.pageable){r=this._pageviews[0].height;if(r<0){r=this._pageviews[0].height}}if(this.vScrollBar.css("visibility")!="visible"){this.vScrollBar.css("visibility","visible")}if(r<=e||this.autoheight){this.vScrollBar.css("visibility","hidden")}if(r-e>0){var s=r-e;this.vScrollBar.jqxScrollBar({max:s})}else{this.vScrollBar.jqxScrollBar({value:0,max:r})}}else{this.vScrollBar.css("visibility","hidden");this.vScrollBar.jqxScrollBar({value:0})}this._arrange();if(this.autoheight){w=Math.round(this.host.height()/this.rowsheight)}this.virtualsizeinfo={visiblerecords:w,virtualheight:r}},_upagv:function(l,n,e){var f=this;var k=this.dataview.rows.length;for(i=0;i<k;i++){var g=this.dataview.rows[i].visibleindex;var d={index:g,height:this.heights[g],hidden:this.hiddens[g],details:this.details[g]};if(this.heights[g]==undefined){this.heights[g]=this.rowsheight;d.height=this.rowsheight}if(this.hiddens[g]==undefined){this.hiddens[g]=false;d.hidden=false}if(this.details[g]==undefined){this.details[g]=null}if(d.height!=f.rowsheight){n-=f.rowsheight;n+=d.height}if(d.hidden){n-=d.height}else{e+=d.height;var h=0;if(this.rowdetails){if(d.details&&d.details.rowdetails&&!d.details.rowdetailshidden){h=d.details.rowdetailsheight;e+=h;n+=h}}}}this._pageviews[0]={top:0,height:e};return n},updatebounddata:function(){this.databind(this.source)},refreshdata:function(){this._refreshdataview();this.render()},_refreshdataview:function(){this.dataview.refresh()},render:function(){this._ren(true,true,true)},clear:function(){this.databind(null);this.render()},_ren:function(e,f,d){if(this.dataview==null){return}this._removeHandlers();this._addHandlers();this._initializeRows();this._requiresupdate=f!=undefined?f:true;if(d){if(!this._requiresupdate){this._initmenu()}if(this.columns==null){this.columns=new b.jqx.collection(this.element)}else{this._initializeColumns()}}this.tableheight=null;this._pagescache=new Array();this._pageviews=new Array();if(this._requiresupdate){this._clearcaches();this._initmenu()}this.virtualsizeinfo=null;this.prerenderrequired=true;if(d){this.content.html("");this.columnsheader=this.columnsheader||b('<div style="overflow: hidden;"></div>');this.columnsheader.remove();this.columnsheader.addClass(this.toThemeProperty("jqx-grid-header"))}else{if(this.gridcontent){this.gridcontent.html("")}}if(!this.showheader){this.columnsheader.css("display","none")}else{if(this.columnsheader){this.columnsheader.css("display","block")}}this.gridcontent=this.gridcontent||b('<div style="width: 100%; overflow: hidden; position: absolute;"></div>');this.gridcontent.remove();this.columnsheader.height(this.columnsheight);this.content.append(this.columnsheader);this.content.append(this.gridcontent);this._arrange();this._initgroupsheader();this.rgrc(false,d);if(this.groups.length>0&&this.groupable){this.suspendgroupevents=true;if(!this.groupsexpandedbydefault){this.collapseallgroups()}else{this.expandallgroups()}this.suspendgroupevents=false}if(this.pageable){this.updatepagerdetails()}},rgrc:function(d,e){if(this.updating()){return false}if(d==undefined||d==null){d=false}this._requiresupdate=d;var g=this.prerenderrequired;if(this.prerenderrequired){this._arrange()}var f=this;var e=e;if(e==null||e==undefined){e=true}this.tableheight=null;f.virtualsizeinfo=f.virtualsizeinfo||f._cvh();if(e){f._rch()}else{this._rensortcolumn()}f._renrows(f.virtualsizeinfo);if(this.gridcontent[0].scrollTop!=0){this.gridcontent[0].scrollTop=0}if(this.gridcontent[0].scrollLeft!=0){this.gridcontent[0].scrollLeft=0}if(g){this._arrange()}return true},_rensortcolumn:function(){var d=this;var e=this.getsortcolumn();if(d.sortdirection){b.each(this.columns.records,function(g,h){var f=b.data(document.body,"groupsortelements"+this.datafield);if(e==null||this.datafield!=e){b(this.sortasc).hide();b(this.sortdesc).hide();if(f!=null){f.sortasc.hide();f.sortdesc.hide()}}else{if(d.sortdirection.ascending){b(this.sortasc).show();b(this.sortdesc).hide();if(f!=null){f.sortasc.show();f.sortdesc.hide()}}else{b(this.sortasc).hide();b(this.sortdesc).show();if(f!=null){f.sortasc.hide();f.sortdesc.show()}}}})}},_rch:function(){var u=this;if(!this.prerenderrequired){this._rensortcolumn();return}this._columnsbydatafield=new Array();this.columnsheader.find("#columntable"+this.element.id).remove();var f=b('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');f[0].cells=new Array();var h=0;var g=0;var n="";var o=this.host.width();var t=new Array();var p=new Array();b.each(this.columns.records,function(k,v){if(!(this.hidden&&this.hideable)){if(this.width!="auto"&&!this._width){o-=this.width}else{n+=this.text}}if(this.pinned){t[t.length]=this}else{p[p.length]=this}});for(i=0;i<t.length;i++){this.columns.replace(i,t[i])}for(j=0;j<p.length;j++){this.columns.replace(t.length+j,p[j])}var s=999;var d=u.groupable?u.groups.length:0;if(this.rowdetails&&this.showrowdetailscolumn){d++}var l=u.columnsheader.height();var e=this._gthe();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>e){if(this.groupable&&this.groups.length>0){if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var r=this.dataview.loadedrootgroups.length*this.rowsheight;if(r>e){o-=this.scrollbarsize+5}}else{o-=this.scrollbarsize+5}}else{o-=this.scrollbarsize+5}}b.each(this.columns.records,function(z,D){var x=b('<div style="position: absolute; height: 100%;"></div>');x.addClass(u.toThemeProperty("jqx-grid-column-header"));x.css("z-index",s--);if(this.width!="auto"&&!this._width){x.width(this.width)}else{var k=Math.round(o*(this.text.length/n.length));if(k<0){$element=b("<span>"+this.text+"</span>");b(document.body).append($element);k=10+$element.width();$element.remove()}this._width="auto";this.width=k;x.width(this.width)}if(this.hidden&&this.hideable){x.css("display","none")}var w=b('<div style="height: 100%; width: 100%;"></div>');var A=b('<div style="display: none; left: 100%; top: 0%; position: absolute;"><div style="width: 100%; height:100%;" class="'+u.toThemeProperty("jqx-grid-column-menubutton")+'"</div></div>');A.height(l);A.addClass(u.toThemeProperty("jqx-fill-state-normal"));if(!u.enableanimations){A.css("margin-left",-16)}var v=b('<div class="sortasc" style="display: none; position: absolute; left: 100%; top: 0%; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');var F=b('<div class="sortdesc" style="display: none; position: absolute; left: 100%; top: 0%; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');v.height(l);v.css("margin-left",-16);F.height(l);F.css("margin-left",-16);v.addClass(u.toThemeProperty("jqx-fill-state-normal"));F.addClass(u.toThemeProperty("jqx-fill-state-normal"));v.find("div").addClass(u.toThemeProperty("jqx-grid-column-sortascbutton"));F.find("div").addClass(u.toThemeProperty("jqx-grid-column-sortdescbutton"));this.sortasc=v[0];this.sortdesc=F[0];f[0].cells[z]=x[0];A.width(u.columnsmenuwidth);var E=u.columnsmenu;var B=false;if((u.groupable&&d>0&&h<d)||(u.rowdetails&&h<d)){h++;E&=false;this.sortable=false}else{var y=this.renderer!=null?this.renderer(this.text,this.align):u._rencolumnheader(this.text,this.align);if(y==null){y=u._rencolumnheader(this.text,this.align)}E&=true;B=true}w.append(y);if(y!=null){w.append(v);w.append(F)}if(E){u._handlecolumnsmenu(u,w,x,A,this)}x.append(w);f.append(x);if(u.groupable&&B){x[0].id=u.dataview.generatekey();u._handlecolumnstogroupsdragdrop(this,x)}var C=this;u.addHandler(x,"click",function(){if(u.sorttogglestates>0){u._ts(C)}u._raiseEvent(7,{column:C.datafield})});x.css("left",g);if(!(this.hidden&&this.hideable)){g+=this.width}});this.columnsrow=f;u.columnsheader.append(f);f.width(g);this._handlecolumnsdragdrop();this._rensortcolumn()},_ts:function(f){var d=this;if(f.sortable&&d.sortable){var e=d.getsortinformation();var g=null;if(e.sortcolumn!=null&&e.sortcolumn==f.datafield){g=e.sortdirection.ascending;if(d.sorttogglestates>1){if(g==true){g=false}else{g=null}}else{g=!g}}else{g=true}d.sortby(f.datafield,g,null)}},_handlecolumnsdragdrop:function(){var e=this;var f=-1;var d=false;if(!e.groupable){return}this.removeHandler(b(document),"mousemove."+this.element.id);this.addHandler(b(document),"mousemove."+this.element.id,function(h){if(e.dragcolumn!=null){var l=parseInt(h.pageX);var s=parseInt(h.pageY);var o=e.host.offset();var u=parseInt(o.left);var v=parseInt(o.top);if(e.dragmousedownoffset==undefined||e.dragmousedownoffset==null){e.dragmousedownoffset={left:0,top:0}}var t=parseInt(h.pageX)-parseInt(e.dragmousedownoffset.left);var g=parseInt(h.pageY)-parseInt(e.dragmousedownoffset.top);e.dragcolumn.css({left:t+"px",top:g+"px"});d=false;if(l>=u&&l<=u+e.host.width()){if(s>=v&&s<=v+e.host.height()){d=true}}f=-1;if(d){e.dragcolumnicon.removeClass(e.toThemeProperty("jqx-grid-dragcancel-icon"));e.dragcolumnicon.addClass(e.toThemeProperty("jqx-grid-drag-icon"));var r=e.groupsheader.offset();var n=r.top+e.groupsheader.height();var k=e.groups.indexOf(b.data(e.dragcolumn[0],"datarecord").toString());var p=(k==-1)||(e.groups.length>1&&k>-1);if(e.dropline!=null){if(s>=r.top&&s<=n){if(p){f=e._handlegroupdroplines(l)}}else{e.dropline.fadeOut("slow")}}}else{if(e.dropline!=null){e.dropline.fadeOut("slow")}e.dragcolumnicon.removeClass(e.toThemeProperty("jqx-grid-drag-icon"));e.dragcolumnicon.addClass(e.toThemeProperty("jqx-grid-dragcancel-icon"))}return false}});this.removeHandler(b(document),"mousedown."+this.element.id);this.addHandler(b(document),"mousedown."+this.element.id,function(g){b(document.body).addClass("jqx-disableselect")});this.removeHandler(b(document),"mouseup."+this.element.id);this.addHandler(b(document),"mouseup."+this.element.id,function(g){b(document.body).removeClass("jqx-disableselect");var n=parseInt(g.pageX);var s=parseInt(g.pageY);var o=e.host.offset();var t=parseInt(o.left);var u=parseInt(o.top);var k=e.groupsheader.height();e.dragstarted=false;e.dragmousedown=null;if(e.dragcolumn!=null){var l=b.data(e.dragcolumn[0],"datarecord");e.dragcolumn.remove();e.dragcolumn=null;if(l!=null){if(d){if(f!=-1){var p=f.index;var r=e.groups[p];var h=e._getGroupIndexByDataField(l);if(h!=p){if(h!=undefined&&h>=0){e.groups.splice(h,1)}if(f.position=="before"){e._insertbeforegroup(r,l)}else{e._insertaftergroup(r,l)}}}else{if(e.groups.length==0){if(s>u&&s<=u+k){e.addgroup(l)}}else{if(s>u+k){var h=e._getGroupIndexByDataField(l);e.removegroupat(h)}}}}if(e.dropline!=null){e.dropline.remove();e.dropline=null}}return false}})},_getGroupIndexByDataField:function(d){for(i=0;i<this.groups.length;i++){if(this.groups[i]==d){return i}}return -1},_isColumnInGroups:function(d){for(i=0;i<this.groups.length;i++){if(this.groups[i]==d){return true}}return false},_handlegroupdroplines:function(f){var d=this;var e=-1;b.each(d.groupheadersbounds,function(g){if(f<=this.left+this.width/2){var h=this.left-3;if(g>0){h=this.left-1-d.groupindentwidth/6}d.dropline.css("left",h);d.dropline.css("top",this.top);d.dropline.height(this.height);d.dropline.fadeIn("slow");e={index:g,position:"before"};return false}else{if(f>=this.left+this.width/2){d.dropline.css("left",1+this.left+this.width);d.dropline.css("top",this.top);d.dropline.height(this.height);d.dropline.fadeIn("slow");e={index:g,position:"after"}}}});return e},_handlegroupstocolumnsdragdrop:function(d,f){this.dragmousedown=null;this.dragmousedownoffset=null;this.dragstarted=false;this.dragcolumn=null;var g=this;var e;this.addHandler(f,"dragstart",function(h){return false});this.addHandler(f,"mousedown",function(h){g.dragmousedown={left:h.pageX,top:h.pageY};var k=b(h.target).offset();g.dragmousedownoffset={left:parseInt(h.pageX)-parseInt(k.left),top:parseInt(h.pageY-k.top)}});this.addHandler(f,"mousemove",function(h){if(g.dragmousedown){e={left:h.pageX,top:h.pageY};if(!g.dragstarted&&g.dragcolumn==null){var k=Math.abs(e.left-g.dragmousedown.left);var l=Math.abs(e.top-g.dragmousedown.top);if(k>3||l>3){g._createdragcolumn(f,e,true);b.data(g.dragcolumn[0],"datarecord",d)}}}})},_createdragcolumn:function(e,g,k){var l=this;var h=g;l.dragcolumn=b("<div></div>");var o=e.clone();l.dragcolumn.css("z-index",999999);o.css("border-width","1px");o.css("opacity","0.4");var n=b(o.find("."+l.toThemeProperty("jqx-grid-column-menubutton")));if(n.length>0){n.css("display","none")}var d=b(o.find(".icon-close"));if(d.length>0){d.css("display","none")}l.dragcolumnicon=b('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>');l.dragcolumnicon.addClass(l.toThemeProperty("jqx-grid-drag-icon"));l.dragcolumn.css("float","left");l.dragcolumn.css("position","absolute");var f=l.host.offset();o.width(e.width()+16);l.dragcolumn.append(o);l.dragcolumn.height(e.height());l.dragcolumn.width(o.width());l.dragcolumn.append(l.dragcolumnicon);b(document.body).append(l.dragcolumn);o.css("margin-left",0);o.css("left",0);o.css("top",0);l.dragcolumn.css("left",h.left+l.dragmousedown.left);l.dragcolumn.css("top",h.top+l.dragmousedown.top);if(k!=undefined&&k){l.dropline=b('<div style="display: none; position: absolute;"></div>');l.dropline.width(2);l.dropline.addClass(l.toThemeProperty("jqx-grid-group-drag-line"));b(document.body).append(l.dropline)}},_handlecolumnstogroupsdragdrop:function(d,f){this.dragmousedown=null;this.dragmousedownoffset=null;this.dragstarted=false;this.dragcolumn=null;var g=this;var e;this.addHandler(f,"dragstart",function(h){return false});this.addHandler(f,"mousedown",function(h){if(g._isColumnInGroups(d.datafield)){return false}g.dragmousedown={left:h.pageX,top:h.pageY};var k=b(h.target).offset();g.dragmousedownoffset={left:parseInt(h.pageX)-parseInt(k.left),top:parseInt(h.pageY-k.top)}});this.addHandler(f,"mousemove",function(h){if(g._isColumnInGroups(d.datafield)){return false}if(g.dragmousedown){e={left:h.pageX,top:h.pageY};if(!g.dragstarted&&g.dragcolumn==null){var k=Math.abs(e.left-g.dragmousedown.left);var l=Math.abs(e.top-g.dragmousedown.top);if(k>3||l>3){g._createdragcolumn(f,e,true);b.data(g.dragcolumn[0],"datarecord",d.datafield)}}}})},_handlecolumnsmenu:function(f,h,g,e,k){f.dragmousedown=null;e[0].id=f.dataview.generatekey();h.append(e);g[0].columnsmenu=e[0];var d=16;g.hover(function(){if(f.menuitemsarray.length>0){if(!f.enableanimations){e.css("display","block");b(k.sortasc).css("margin-left",-2*d);b(k.sortdesc).css("margin-left",-2*d)}else{e.css("display","block");e.animate({"margin-left":-d},"fast");b(k.sortasc).animate({"margin-left":-2*d},"fast");b(k.sortdesc).animate({"margin-left":-2*d},"fast")}}},function(){if(f.menuitemsarray.length>0){var l=b.data(document.body,"contextmenu"+f.element.id);if(l!=undefined&&e[0].id==l.columnsmenu.id){return}if(!f.enableanimations){b(k.sortasc).css("margin-left",-d);b(k.sortdesc).css("margin-left",-d);e.css("display","none")}else{e.css("margin-left",-d);e.animate({"margin-left":0},"fast",function(){e.css("display","none")});b(k.sortasc).css("margin-left",-2*d);b(k.sortasc).animate({"margin-left":-d},"fast");b(k.sortdesc).css("margin-left",-2*d);b(k.sortdesc).animate({"margin-left":-d},"fast")}}});f.addHandler(e,"click",function(o){var p=e.offset();var v=e.height();if(f.host.width()>parseInt(p.left)+f.gridmenu.width()){f.gridmenu.jqxMenu("open",p.left,p.top+v)}else{f.gridmenu.jqxMenu("open",2+e.width()+p.left-f.gridmenu.width(),p.top+v)}f._hasOpenedMenu=true;var t=f._getmenuitembyindex(0);var l=f._getmenuitembyindex(1);var w=f._getmenuitembyindex(2);var u=f._getmenuitembyindex(3);var n=f._getmenuitembyindex(4);if(t!=null&&l!=null&&w!=null){var r=k.sortable&&f.sortable;f.gridmenu.jqxMenu("disable",t.id,!r);f.gridmenu.jqxMenu("disable",l.id,!r);f.gridmenu.jqxMenu("disable",w.id,!r);if(k.datafield){if(f.sortcolumn==k.datafield){var s=f.getsortinformation();if(r){if(s.sortdirection.ascending){f.gridmenu.jqxMenu("disable",t.id,true)}else{f.gridmenu.jqxMenu("disable",l.id,true)}}}else{f.gridmenu.jqxMenu("disable",w.id,true)}}}if(u!=null&&n!=null){if(!f.groupable){f.gridmenu.jqxMenu("disable",n.id,true);f.gridmenu.jqxMenu("disable",u.id,true)}else{if(f.groups&&f.groups.indexOf(k.datafield)!=-1){f.gridmenu.jqxMenu("disable",u.id,true);f.gridmenu.jqxMenu("disable",n.id,false)}else{f.gridmenu.jqxMenu("disable",u.id,false);f.gridmenu.jqxMenu("disable",n.id,true)}}}b.data(document.body,"contextmenu"+f.element.id,{column:k,columnsmenu:e[0]});return false})},_rencolumnheader:function(e,f){var d=b('<a style="float: '+f+';" href="#">'+e+"</a>");return d},_renrows:function(d){var e=this;if(this.pageable&&this.autoheight){if(this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length!=this.dataview.rows.length){e.prerenderrequired=true}}e._prerenderrows(d);if(e._requiresupdate){e._requiresupdate=false;e._uppv()}if(!this.pageable&&this.virtualmode){var f=function(){if(e.rendergridrows){var l=e._startboundindex;if(l==undefined){l=0}var k=l+1+e.dataview.pagesize;if(l!=null&&k!=null){if(e.source.recordstartindex!=l){var h={startindex:l,endindex:k};e.source.recordstartindex=l;e.rendergridrows(h)}}}};if(this.loadondemand){f();this.loadondemand=false}this._renvisualrows()}else{if(navigator&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")!=-1){this.updatedelay=1}if(this.updatedelay==0){e._renvisualrows()}else{var g=b.data(document.body,"Grid"+this.element.id);if(g!=null){clearTimeout(g)}if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()){g=setTimeout(function(){e._renvisualrows()},this.updatedelay);b.data(document.body,"Grid"+this.element.id,g)}else{b.data(document.body,"Grid"+this.element.id,null);e._renvisualrows()}}}},_renhorizontalscroll:function(){var k=this.hScrollInstance;var n=k.value;var f=parseInt(n);if(this.table==null){return}var s=this.table[0].rows.length;var r=this.columnsrow;var l=this.groupable&&this.groups.length>0?this.groups.length:0;var p=this.columns.records.length-l;var h=this.columns.records;for(i=0;i<s;i++){var d=this.table[0].rows[i];for(j=0;j<l+p;j++){var e=d.cells[j];if(e!=undefined){var g=h[j];if(!g.pinned){e.style.marginLeft=-f+"px";if(i==0){var o=r[0].cells[j];o.style.marginLeft=-f+"px"}}}}}},_updaterowdetailsvisibility:function(){if(this.rowdetails){for(i=0;i<this._rowdetailselementscache.length;i++){b(this._rowdetailselementscache[i]).css("display","none")}}},_renvisualrows:function(){var K=this.vScrollInstance;var l=this.hScrollInstance;var e=K.value;var v=l.value;var k=parseInt(e);var g=parseInt(v);var t=this._gthe();var w=this.groupable&&this.groups.length>0;this.visiblerows=new Array();this.hittestinfo=new Array();if(this.virtualmode&&!this.pageable){this._pagescache=new Array()}if(this._pagescache.length==0){this.dataview.updateview();this._lr()}if(this.vScrollBar.css("visibility")!="visible"){k=0}if(!this.pageable){var C=this._fvsr(k,this._pageviews);if(C==-1){return}if(C!=this.dataview.pagenum){this.dataview.pagenum=C;this.dataview.updateview();this._lr()}else{if(!this._pagescache[this.dataview.pagenum]){this._lr()}}}var S=this.groupable&&this.groups.length>0?this.groups.length:0;var n=this.columns.records.length-S;var M=this._fvsr(k,this._pagescache[this.dataview.pagenum]);var D=this._pagescache[this.dataview.pagenum];var H=M;if(H<0){H=0}var O=0;var L=0;var G=0;var d=0;var I=this.virtualsizeinfo.visiblerecords;var F=this.groupable?this.groups.length:0;var u=this.toThemeProperty("jqx-grid-cell");if(w){u=" "+this.toThemeProperty("jqx-grid-group-cell")}var E=this.rowsheight;var z=H;var R=this._rcel;var o=true;if(H>=0){this._updaterowdetailsvisibility();this._startboundindex=D!=null?D[H].bounddata.boundindex:0;for(renderindex=0;renderindex<I&&L<I;renderindex++){var N=D!=undefined?D[H+renderindex]:null;if(N==null){H=-renderindex;if(this._pagescache[this.dataview.pagenum+1]){D=this._pagescache[this.dataview.pagenum+1];this.dataview.pagenum++}else{var p=this._pageviews.length;do{if(this.dataview.pagenum<this._pageviews.length-1){this.dataview.pagenum++;D=undefined;if(this._pageviews[this.dataview.pagenum].height>0){this.dataview.updateview();this._lr();D=this._pagescache[this.dataview.pagenum]}}else{D=undefined;break}}while(D==undefined&&this.dataview.pagenum<p)}if(D!=undefined){N=D[H+renderindex]}}if(N!=null){if(N.hidden){continue}if(renderindex==0){var h=Math.abs(k-N.top);this.table.css("top",-h);d=-h}var f=this.table[0].rows[L];var A=b(f);if(parseInt(f.style.height)!=N.height){A.height(N.height)}G+=N.height;var J=this.rowdetails&&N.rowdetails;var s=!N.rowdetailshidden;if(J&&s){A.height(N.height-N.rowdetailsheight);I++}var B=this._isrowselected(o,N);for(j=0;j<S+n;j++){var P=j;this._renvisualcell(R,u,B,J,s,w,F,f,N,P,L)}if(N.group!=undefined){this._rengroup(F,f,N,S,n,L)}this.visiblerows[this.visiblerows.length]=N;this.hittestinfo[this.hittestinfo.length]={row:N,visualrow:f,details:false};if(J&&s){L++;var f=this.table[0].rows[L];this._renrowdetails(u,f,N,S,n,L);this.visiblerows[this.visiblerows.length]=N;this.hittestinfo[this.hittestinfo.length]={row:N,visualrow:f,details:true}}if(G+d>=t){break}}else{cansetheight=true;this._clrvsc(g,w,L,S,n);if(G+O+parseInt(this.table.css("top"))<=t){O+=E}}L++}this._horizontalvalue=g;if(O>0){if(this.vScrollBar.css("visibility")=="visible"){var Q=parseInt(this.table.css("top"));var y=this._pageviews[this._pageviews.length-1];var r=K.max;var x=y.top+y.height-t;if(r!=x){K.max=x;K.setPosition(K.max)}}}}},_isrowselected:function(f,e){var d=false;if(f&&e.bounddata!=null){if(this.selectionmode!="singlerow"){if(this.selectedrowindexes.indexOf(e.bounddata.boundindex)!=-1){d=true}}else{if(e.bounddata.boundindex==this.selectedrowindex){d=true}}}return d},_renvisualcell:function(A,k,r,n,u,y,l,s,d,h,t){var f=null;var g=this.columns.records[h];cellvalue=this._getcellvalue(g,d);var e=s.cells[h];var x=k;var p=this.sortcolumn&&g.datafield==this.sortcolumn;if(p){x+=" "+this.toThemeProperty("jqx-grid-cell-sort")}if(g.pinned){x+=" "+this.toThemeProperty("jqx-grid-cell-pinned")}if(this.altrows&&d.group==undefined){var z=d.visibleindex;if(z>=this.altstart){if((this.altstart+z)%(1+this.altstep)==0){if(!p){x+=" "+this.toThemeProperty("jqx-grid-cell-alt")}else{x+=" "+this.toThemeProperty("jqx-grid-cell-sort-alt")}if(g.pinned){x+=" "+this.toThemeProperty("jqx-grid-cell-pinned-alt")}}}}if(j<=l){if(y||this.rowdetails){var v=b(e);var o=this.columns.records[j].width;if(parseInt(e.style.width)!=o){v.width(o)}}}var w=true;if(this.rowdetails&&n){if(u&&!y){x+=" "+this.toThemeProperty("jqx-grid-details-cell")}else{if(y){x+=" "+this.toThemeProperty("jqx-grid-group-details-cell")}}if(this.showrowdetailscolumn){if(d.group==undefined&&h==l){if(u){x+=" "+this.toThemeProperty("jqx-grid-group-expand")}else{x+=" "+this.toThemeProperty("jqx-grid-group-collapse")}w=false}}}if(r&&w){x+=" "+this.toThemeProperty("jqx-grid-cell-selected")}if(e.className!=x){e.className=x}if(d.group!=undefined){cellvalue="";e.title="";e.innerHTML="";return}A(this,g,d,cellvalue,e)},_rcel:function(k,f,o,n,e){var g=o.uniqueid+"_"+f.visibleindex;if(k._cellscache[g]){if(f.columntype=="checkbox"){if(k.host.jqxCheckBox){if(n==""){n=false}if(e.checkbox&&!k.groupable){e.checkboxrow=o.boundindex;e.checkbox.jqxCheckBox({checked:n})}else{k._rencheckboxcell(k,e,f,o,n)}return}}var h=k._cellscache[g];var d=h.element;if(e.innerHTML.toLowerCase()!=d.toLowerCase()){e.innerHTML=d;if(k.enabletooltips){e.title=h.title}}return}if(k.enabletooltips){if(f.cellsformat!=""){if(b.jqx.gridformat.isNumber(n)){n=b.jqx.gridformat.formatnumber(n,f.cellsformat,k.gridlocalization)}else{if(b.jqx.gridformat.isDate(n)){n=b.jqx.gridformat.formatdate(n,f.cellsformat,k.gridlocalization)}}}e.title=n}if(f.columntype=="checkbox"){k._rencheckboxcell(k,e,f,o,n);k._cellscache[g]={element:"",title:n};return}else{if(f.columntype=="number"){n=o.visibleindex}}var l=k._defaultcellsrenderer(n,f);var d=null;if(f.cellsrenderer!=null){d=f.cellsrenderer(o.boundindex,f.datafield,n,l,f.getcolumnproperties())}else{d=l}if(d==null){d=l}k._cellscache[g]={element:d,title:n};e.innerHTML=d;return true},_rencheckboxcell:function(f,d,e,k,g){if(f.host.jqxCheckBox){var h=b(d);if(g==""){g=false}if(h.find(".jqx-checkbox").length==0){d.innerHTML='<div style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>';b(d.firstChild).jqxCheckBox({enableContainerClick:false,animationShowDelay:0,animationHideDelay:0,locked:true,theme:f.theme,checked:g});d.checkbox=b(d.firstChild);d.checkboxrow=k.boundindex;b(d.firstChild).bind("change",function(l){if(e.checkchange){e.checkchange(d.checkboxrow,l.args.checked)}})}else{d.checkboxrow=k.boundindex;b(d.firstChild).jqxCheckBox({checked:g})}}},_clrvsc:function(k,l,g,h,d){var e=this.toThemeProperty("jqx-grid-cell");if(l){e=" "+this.toThemeProperty("jqx-grid-group-cell")}for(j=0;j<h+d;j++){if(this.table[0].rows[g]){var f=this.table[0].rows[g].cells[j];f.className=e;if(this._horizontalvalue!=k&&!this.columns.records[j].pinned){b(f).css("margin-left",-k)}var n=this.columns.records[j].width;if(parseInt(f.style.width)!=n){b(f).width(n)}f.title="";f.innerHTML="";b(this.table[0].rows[g]).height(this.rowsheight)}}},_findgroupstate:function(e){var d=this._findgroup(e);if(d==null){return false}return d.expanded},_findgroup:function(e){var d=null;if(this.expandedgroups[e]){return this.expandedgroups[e]}return d},_rengroup:function(g,d,t,l,r,u){var w=d;var k=d.cells[t.level];var p=this._findgroupstate(t.uniqueid);if(t.bounddata.subGroups.length>0||t.bounddata.subItems.length>0){if(p){k.className+=" "+this.toThemeProperty("jqx-grid-group-expand")}else{k.className+=" "+this.toThemeProperty("jqx-grid-group-collapse")}}var s=this._getColumnText(this.groups[t.level]);var f=this.groupindentwidth;var h=this.rowdetails&&this.showrowdetailscolumn?(1+g)*f:(g)*f;var e=b(w).width()-h;b(w.cells[t.level+1]).width(e);if(this.groupsrenderer!=null){var v={group:t.group,level:t.level,groups:t.bounddata.subGroups,rows:t.bounddata.subItems};var n=this.groupsrenderer(s+": "+t.group,t.group,p,v);if(n){w.cells[t.level+1].innerHTML=n}else{var o=t.bounddata.subItems.length>0?t.bounddata.subItems.length:t.bounddata.subGroups.length;w.cells[t.level+1].innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+s+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+t.group+" ("+o+")</span></div>"}}else{var o=t.bounddata.subItems.length>0?t.bounddata.subItems.length:t.bounddata.subGroups.length;w.cells[t.level+1].innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+s+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+t.group+" ("+o+")</span></div>"}},_clearcaches:function(){this._columnsbydatafield=new Array();this._pagescache=new Array();this._pageviews=new Array();this._cellscache=new Array();this.heights=new Array();this.hiddens=new Array();this.hiddenboundrows=new Array();this.heightboundrows=new Array();this.detailboundrows=new Array();this.details=new Array();this.expandedgroups=new Array();this._rowdetailscache=new Array();this._rowdetailselementscache=new Array();b.jqx.gridformat.cleardatescache();this.tableheight=null},_getColumnText:function(d){if(this._columnsbydatafield==undefined){this._columnsbydatafield=new Array()}if(this._columnsbydatafield[d]){return this._columnsbydatafield[d]}var e=d;b.each(this.columns.records,function(){if(this.datafield==d){e=this.text;return false}});this._columnsbydatafield[d]=e;return e},isscrollingvertically:function(){var d=(this.vScrollBar.jqxScrollBar("isScrolling"));return d},_renrowdetails:function(r,w,d,v,o,y){var A=b(w);var g=0;var s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:(this.groups.length)*this.groupindentwidth;var e=b(w.cells[g]);e.css("width","100%");A.height(d.rowdetailsheight);e[0].className=r;var p=d.bounddata.boundindex;var l=p+"_";if(this._rowdetailscache[l]){var t=this._rowdetailscache[l];var z=t.html;if(this.initrowdetails){if(this._rowdetailscache[l].element){var f=this._rowdetailscache[l].element;var k=e.offset();var x=this.gridcontent.offset();var u=parseInt(k.top)-parseInt(x.top);var n=parseInt(k.left)-parseInt(x.left);b(f).css("top",u);b(f).css("left",n);b(f).css("display","block")}}else{e[0].innerHTML=z}return}e[0].innerHTML="";if(!this.enablerowdetailsindent){s=0}var h='<div style="overflow: hidden; width: 100%; height: 100%; margin-left: '+s+'px;">'+d.rowdetails+"</div>";this._rowdetailscache[l]={id:w.id,html:h};if(this.initrowdetails){var f=b(h)[0];b(this.gridcontent).prepend(b(f));b(f).css("position","absolute");b(f).width(this.host.width()-s);b(f).height(e.height());var k=e.offset();b(f).css("z-index",99999);var k=e.offset();var x=this.gridcontent.offset();var u=parseInt(k.top)-parseInt(x.top);var n=parseInt(k.left)-parseInt(x.left);b(f).css("top",u);b(f).css("left",n);this.content[0].scrollTop=0;this.content[0].scrollLeft=0;this.initrowdetails(p,f);this._rowdetailscache[l].element=f;this._rowdetailselementscache[p]=f}else{e[0].innerHTML=h}},_defaultcellsrenderer:function(e,d){if(d.cellsformat!=""){if(!this.enabletooltips){if(b.jqx.gridformat.isNumber(e)){e=b.jqx.gridformat.formatnumber(e,d.cellsformat,this.gridlocalization)}else{if(b.jqx.gridformat.isDate(e)){e=b.jqx.gridformat.formatdate(e,d.cellsformat,this.gridlocalization)}}}}return'<span style="margin: 4px; float: '+d.cellsalign+';">'+e+"</span>"},_getcellvalue:function(d,f){var e=null;e=f.bounddata[d.datafield];if(e==null){e=""}return e},getcell:function(h,d){if(h==null||d==null){return null}var e=parseInt(h);var g=h;var f="";if(!isNaN(e)){g=this.getrowdata(e)}if(g!=null){f=g[d]}return this._getcellresult(f,h,d)},getrenderedcell:function(h,d){if(h==null||d==null){return null}var e=parseInt(h);var g=h;var f="";if(!isNaN(e)){g=this.getrenderedrowdata(e)}if(g!=null){f=g[d]}return this._getcellresult(f,h,d)},_getcellresult:function(l,p,e){var h=this.getcolumn(e).getcolumnproperties();var f=h.hidden;var d=h.width;var o=h.pinned;var g=h.cellsalign;var k=h.cellsformat;var n=this.getrowheight(p);if(n==false){return null}return{value:l,row:p,column:e,width:d,height:n,hidden:f,pinned:o,align:g,format:k}},getcellvalue:function(h,d){if(h==null||d==null){return null}var e=parseInt(h);var g=h;if(!isNaN(e)){g=this.getrowdata(e)}if(g!=null){var f=g[d];return f}return null},getrowdata:function(d){if(d==undefined){d=0}if(d>=0&&d<this.dataview.bounditems.length){var e=this.dataview.records[d];return e}return null},getrenderedrowdata:function(d){if(d==undefined){d=0}if(d>=0&&d<this.dataview.bounditems.length){var e=this.dataview.loadedrecords[d];if(this.pageable){var e=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+d]}return this.getrowdata(e.boundindex)}return null},getrowid:function(d){if(d==undefined){d=0}if(d>=0&&d<this.dataview.bounditems.length){var e=this.dataview.bounditems[d].uid;return e}return null},updaterow:function(d,f){if(d!=undefined&&f!=undefined){var e=this.dataview.updaterow(d,f);this.render();if(this.source.updaterow){this.source.updaterow(d,f)}return e}return false},deleterow:function(d){if(d!=undefined){var e=this.dataview.deleterow(d);this.render();if(this.source.deleterow){this.source.deleterow(d)}return e}return false},addrow:function(e,g,d){if(g!=undefined){if(d==undefined){d="last"}var f=this.dataview.addrow(e,g,d);this.render();if(this.source.addrow){this.source.addrow(g.uid,g,d)}return f}return false},_fvsr:function(g,h){if(g==undefined){g=parseInt(this.vScrollInstance.value)}var e=0;if(h==undefined||h==null){h=this.rows.records}var d=h.length;while(e<=d){mid=parseInt((e+d)/2);var f=h[mid];if(f==undefined){break}if(f.top>g&&f.top+f.height>g){d=mid-1}else{if(f.top<g&&f.top+f.height<g){e=mid+1}else{return mid;break}}}return -1},_finddataviewrow:function(){var k=parseInt(this.vScrollInstance.value);var g=0;var n=this.dataview.rows;var f=n.length;var e=this.rowsheight;var d=this.dataview.pagenum;while(g<=f){mid=parseInt((g+f)/2);var h=n[mid];var l=mid*e*d;if(h==undefined){break}if(l>k&&l+e>k){f=mid-1}else{if(l<k&&l+e<k){g=mid+1}else{return mid;break}}}return -1},_prerenderrows:function(g){var s=this;if(this.prerenderrequired==true){this.prerenderrequired=false;this.gridcontent.find("#contenttable"+this.element.id).remove();if(this.table!=null){this.table.remove();this.table=null}this.table=b('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;" height="100%"></div>');this.gridcontent.addClass(this.toThemeProperty("jqx-grid-content"));this.gridcontent.append(this.table);var l=this.groupable&&this.groups.length>0;var u=0;this.table[0].rows=new Array();var w=999;var r=this.toThemeProperty("jqx-grid-cell");if(l){r=" "+this.toThemeProperty("jqx-grid-group-cell")}var n=g.visiblerecords;if(this.pageable&&this.autoheight){n=this.dataview.pagesize;if(this.groupable){this.dataview.updateview();n=this.dataview.rows.length}}if(!this.pageable&&this.autoheight){n=this.dataview.totalrecords}if(this.rowdetails){n+=this.dataview.pagesize}var v=this.columns.records.length;if(b.browser.msie&&b.browser.version>8){this.table.css("opacity","0.99")}for(i=0;i<n;i++){var d=b('<div style="position: relative;" id="row'+i+this.element.id+'"></div>');var k=0;this.table[0].rows[i]=d[0];this.table[0].rows[i].cells=new Array();for(j=0;j<v;j++){var h=this.columns.records[j];var f=h.width;var p=b('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+r+'"></div>');d.append(p);p.css("left",k);p.css("z-index",w--);p.width(f);p[0].left=k;if(!(h.hidden&&h.hideable)){k+=f}else{p.css("display","none")}this.table[0].rows[i].cells[j]=p[0]}if(u==0){this.table.width(k);u=k}this.table.append(d);d.height(this.rowsheight)}var e=this.hScrollBar.css("visibility");var o=0;if(this.vScrollBar.css("visibility")=="visible"){o=this.scrollbarsize}if(this.table.width()>this.host.width()-o){if(e!="visible"){this.hScrollBar.css("visibility","visible");this._arrange()}if(this.vScrollBar.css("visibility")=="visible"){var t=this.vScrollBar.jqxScrollBar("max");this.vScrollBar.jqxScrollBar("max",t+this.scrollbarsize+4)}this.hScrollBar.jqxScrollBar("max",o+this.table.width()-this.host.width())}else{if(e!="hidden"){this.hScrollBar.css("visibility","hidden");this._arrange()}}this._renhorizontalscroll()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){this.tableheight=null;var f=null;var u=null;if(this.width!=null&&this.width.toString().indexOf("px")!=-1){f=this.width}else{if(this.width!=undefined&&!isNaN(this.width)){f=this.width}}if(this.height!=null&&this.height.toString().indexOf("px")!=-1){u=this.height}else{if(this.height!=undefined&&!isNaN(this.height)){u=this.height}}if(this.autoheight&&this.virtualsizeinfo){if(this.pageable){var t=this.host.height()-this._gthe();u=t+this._pageviews[0].height-1}else{var t=this.host.height()-this._gthe();if(this._pageviews.length>0){u=this._pageviews[this._pageviews.length-1].height+this._pageviews[this._pageviews.length-1].top;this.vScrollBar.css("visibility","hidden")}}}else{if(this.autoheight){u=this.dataview.totalrecords*this.rowsheight;if(u>10000){u=10000}}}var s=this.host.css("border-width");if(s==null){s=0}if(f!=null){f=parseInt(f);this.host.width(this.width)}else{this.host.width(250)}if(u!=null){u=parseInt(u);this.host.height(u)}else{this.host.height(250)}var r=0;if(this._groupsheader()){this.groupsheader.width(f);this.groupsheader.height(this.groupsheaderheight);this.groupsheader.css("top",0);var g=this.groupsheader.height()+1;r=g;if(u>g){u-=parseInt(g)}}else{this.groupsheader.width(f);this.groupsheader.height(this.groupsheaderheight);this.groupsheader.css("top",0);this.content.css("top",this.groupsheader.height())}var d=this.scrollbarsize;if(isNaN(d)){d=parseInt(d);if(isNaN(d)){d="17px"}else{d=d+"px"}}d=parseInt(d);var n=4;var v=2;var p=0;if(this.vScrollBar.css("visibility")=="visible"){p=d+n}if(this.hScrollBar.css("visibility")=="visible"){v=d+n+2}var e=0;if(this.pageable){e=this.pagerheight;v+=this.pagerheight}this.hScrollBar.height(d);this.hScrollBar.css({top:r+u-n-d-e+"px",left:"0px"});this.hScrollBar.width(f-d-n+"px");if(p==0){this.hScrollBar.width(f-2)}this.vScrollBar.width(d);this.vScrollBar.height(parseInt(u)-v+"px");this.vScrollBar.css({left:parseInt(f)-parseInt(d)-n+"px",top:r});var l=this.vScrollInstance;l.disabled=this.disabled;l.refresh();var h=this.hScrollInstance;h.disabled=this.disabled;h.refresh();if((this.vScrollBar.css("visibility")=="visible")&&(this.hScrollBar.css("visibility")=="visible")){this.bottomRight.css("visibility","visible");this.bottomRight.css({left:1+parseInt(this.vScrollBar.css("left")),top:parseInt(this.hScrollBar.css("top"))});this.bottomRight.width(parseInt(d)+3);this.bottomRight.height(parseInt(d)+4)}else{this.bottomRight.css("visibility","hidden")}this.content.width(f-p);this.content.height(u-v+2);this.content.css("top",r);if(this.pageable){this.pager.width(f);this.pager.height(this.pagerheight);this.pager.css("top",r+u-this.pagerheight)}else{this.pager.height(0)}if(this.table!=null){var k=0;if(this.vScrollBar.css("visibility")=="visible"){k=this.scrollbarsize+4}var o=k+this.table.width()-this.host.width();this.hScrollBar.jqxScrollBar("max",o);if(this.hScrollBar.css("visibility")=="visible"&&o==0){this.hScrollBar.css("visibility","hidden");this._arrange()}}},destroy:function(){if(this.host.jqxMenu){if(this.gridmenu){this.gridmenu.jqxMenu("destroy");this.gridmenu.remove()}}if(this.pagerrightbutton){this.removeHandler(this.pagerrightbutton,"mousedown");this.removeHandler(this.pagerrightbutton,"mouseup");this.removeHandler(this.pagerrightbutton,"click");this.pagerrightbutton.jqxButton("destroy")}if(this.pagerleftbutton){this.removeHandler(this.pagerleftbutton,"mousedown");this.removeHandler(this.pagerleftbutton,"mouseup");this.removeHandler(this.pagerleftbutton,"click");this.pagerleftbutton.jqxButton("destroy")}this.columns=new b.jqx.collection(this.element);this.rows=new b.jqx.collection(this.element);this.hScrollInstance.destroy();this.vScrollInstance.destroy();this.hScrollBar.remove();this.vScrollBar.remove();this._removeHandlers();this._clearcaches();this.dataview._clearcaches();this.content.remove();this.host.remove()},_initializeColumns:function(){var g=this;var d=new b.jqx.collection(this.element);var f=0;if(!this._columns){this._columns=this.columns}else{this.columns=this._columns}if(this.groupable){b.each(this.groups,function(h){var k=new c(g,this);k.visibleindex=f++;k.width=g.groupindentwidth;d.add(k)})}if(this.rowdetails&&this.showrowdetailscolumn){var e=new c(g,this);e.visibleindex=f++;e.width=g.groupindentwidth;e.pinned=true;d.add(e)}b.each(this.columns,function(h){var k=new c(g,this);if(!k.hidden||(k.hidden&&!k.hideable)){k.visibleindex=f++;d.add(k)}});this.columns=d},_initializeRows:function(){var d=new b.jqx.collection(this.element);this.rows=d},_raiseEvent:function(h,e){if(e==undefined){e={owner:null}}var f=this.events[h];args=e;args.owner=this;var g=new jQuery.Event(f);g.owner=this;g.args=args;var d=this.host.trigger(g);e=g.args;return d},wheel:function(f,e){var g=0;if(!f){f=window.event}if(f.originalEvent&&f.originalEvent.wheelDelta){f.wheelDelta=f.originalEvent.wheelDelta}if(f.wheelDelta){g=f.wheelDelta/120}else{if(f.detail){g=-f.detail/3}}if(g){var d=e._handleDelta(g);if(!d){if(f.preventDefault){f.preventDefault()}return d}else{return}}if(f.preventDefault){f.preventDefault()}f.returnValue=false},_handleDelta:function(f){var e=this.vScrollInstance.value;if(f<0){this.scrollDown()}else{this.scrollUp()}var d=this.vScrollInstance.value;if(e!=d){return false}return false},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden"){return}var d=this.vScrollInstance;if(d.value+d.largestep<=d.max){d.setPosition(d.value+d.largestep)}else{d.setPosition(d.max)}},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden"){return}var d=this.vScrollInstance;if(d.value-d.largestep>=d.min){d.setPosition(d.value-d.largestep)}else{d.setPosition(d.min)}},_removeHandlers:function(){var d=this;this.removeHandler(this.vScrollBar,"valuechanged");this.removeHandler(this.hScrollBar,"valuechanged");this.removeHandler(this.host,"mousewheel");this.removeHandler(this.host,"mousedown");this.removeHandler(this.content,"mousemove");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.content,"mouseleave");this.removeHandler(this.content,"selectstart."+this.element.id);this.removeHandler(this.host,"dragstart."+this.element.id)},_addHandlers:function(){var d=this;this.addHandler(this.host,"dragstart."+this.element.id,function(e){return false});this.vScrollInstance.valuechanged=function(e){d._closemenu();d._renrows(d.virtualsizeinfo);if(!d.pageable&&!d.groupable&&d.dataview.virtualmode){if(d.loadondemandupdate){clearTimeout(d.loadondemandupdate)}d.loadondemandupdate=setTimeout(function(){d.loadondemand=true;d._renrows(d.virtualsizeinfo)},100)}};this.hScrollInstance.valuechanged=function(e){d._closemenu();if(navigator&&navigator.userAgent.indexOf("Safari")!=-1){setTimeout(function(){d._renhorizontalscroll()},1)}else{d._renhorizontalscroll()}};this.addHandler(this.host,"mousewheel",function(e){d.wheel(e,d)});this.addHandler(this.host,"mousedown",function(e){d._handlemousedown(e,d)});this.addHandler(this.content,"mousemove",function(e){d._handlemousemove(e,d)});this.addHandler(this.content,"mouseleave",function(e){if(d.enablehover){d._clearhoverstyle()}});this.addHandler(this.content,"selectstart."+this.element.id,function(e){return false})},_clearhoverstyle:function(){if(undefined==this.hoveredrow||this.hoveredrow==-1){return}var d=this.table.find(".jqx-grid-cell-hover");if(d.length>0){d.removeClass(this.toThemeProperty("jqx-grid-cell-hover"))}this.hoveredrow=-1},_clearselectstyle:function(){var g=this.table[0].rows.length;for(i=0;i<g;i++){var f=this.table[0].rows[i];var d=f.cells.length;for(j=0;j<d;j++){var e=f.cells[j];b(e).removeClass(this.toThemeProperty("jqx-grid-cell-selected"));b(e).removeClass(this.toThemeProperty("jqx-grid-cell-hover"))}}},_selectrowwithmouse:function(f,d,l){var n=d.row;if(n==undefined){return}var g=d.index;var h=this.hittestinfo[g].visualrow;if(this.hittestinfo[g].details){return}var e=h.cells[0].className;if(n.group){return}if(this.selectionmode=="multiplerows"){var k=l.indexOf(n.boundindex)!=-1;if(k){this._selectrowwithstyle(f,h,false)}else{this._selectrowwithstyle(f,h,true)}}else{this._clearselectstyle();this._selectrowwithstyle(f,h,true)}},_selectrowwithstyle:function(g,k,d){var e=k.cells.length;var h=0;if(g.rowdetails&&g.showrowdetailscolumn){h=1}for(i=h;i<e;i++){var f=k.cells[i];if(d){b(f).removeClass(this.toThemeProperty("jqx-grid-cell-hover"));b(f).addClass(this.toThemeProperty("jqx-grid-cell-selected"))}else{b(f).removeClass(this.toThemeProperty("jqx-grid-cell-hover"));b(f).removeClass(this.toThemeProperty("jqx-grid-cell-selected"))}}},_handlemousemove:function(f,t){if(t.enablehover){if(t.disabled){return}if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()){return}var h=this.showheader?this.columnsheader.height()+2:0;var g=this._groupsheader()?this.groupsheader.height():0;var l=this.host.offset();var s=f.pageX-l.left;var p=f.pageY-h-l.top-g;var r=this._hittestrow(s,p);var u=r.row;var n=r.index;if(this.hoveredrow!=-1&&n!=-1&&this.hoveredrow==n){return}this._clearhoverstyle();if(n==-1||u==undefined){return}var e=this.hittestinfo[n].visualrow;if(e==null){return}if(this.hittestinfo[n].details){return}var d=0;if(t.rowdetails&&t.showrowdetailscolumn){d=1}var o=e.cells[d].className;if(u.group||o.indexOf("jqx-grid-cell-selected")!=-1){return}this.hoveredrow=n;for(i=d;i<e.cells.length;i++){var k=e.cells[i];b(k).addClass(this.toThemeProperty("jqx-grid-cell-hover"))}}},_hittestrow:function(v,t){if(this.vScrollInstance==null||this.hScrollInstance==null){return}if(v==undefined){v=0}if(t==undefined){t==0}var n=this.vScrollInstance;var l=this.hScrollInstance;var e=n.value;if(this.vScrollBar.css("visibility")!="visible"){e=0}var o=l.value;if(this.hScrollBar.css("visibility")!="visible"){o=0}var u=parseInt(e)+t;var k=parseInt(o)+v;if(this.visiblerows==null){return}var h=this._fvsr(u,this.visiblerows);if(h>=0){var r=this.visiblerows[h];var d=this.rowdetails&&r.rowdetails;var p=!r.rowdetailshidden;if(d){var f=this.visiblerows[h-1];if(f==r){r=f;h--}if(p){var g=b(this.hittestinfo[h].visualrow).position().top+parseInt(this.table.css("top"));var s=b(this.hittestinfo[h].visualrow).height();if(!(t>=g&&t<=g+s)){h++;r=this.visiblerows[h]}}}}return{index:h,row:r}},_handlemousedown:function(z,r){if(z.target==null){return}if(r.disabled){return}this.host.focus();var B;if(z.which){B=(z.which==3)}else{if(z.button){B=(z.button==2)}}if(B){return}var E;if(z.which){E=(z.which==2)}else{if(z.button){E=(z.button==1)}}if(E){return}var A=this.showheader?this.columnsheader.height()+2:0;var s=this._groupsheader()?this.groupsheader.height():0;var g=this.host.offset();var p=z.pageX-g.left;var o=z.pageY-A-g.top-s;var d=this._hittestrow(p,o);var k=d.row;var l=d.index;var u=z.target.className;var t=this.table[0].rows[l];if(t==null){return}var v=this.hScrollInstance;var w=v.value;var f=0;var n=this.groupable?this.groups.length:0;for(i=0;i<t.cells.length;i++){var h=parseInt(b(this.columnsrow[0].cells[i]).css("left"));var D=h+b(this.columnsrow[0].cells[i]).width();if(D>=p&&p>=h){f=i;break}}if(k!=null){this._raiseEvent(1,{rowindex:k.boundindex,visibleindex:k.visibleindex,group:k.group});var e=this._getcolumnat(f);this._raiseEvent(8,{rowindex:k.boundindex,column:e?e.datafield:null,columnindex:f});if(u.indexOf("jqx-grid-group-expand")!=-1||u.indexOf("jqx-grid-group-collapse")!=-1){if(n>0&&f<n){this._togglegroupstate(k.bounddata,true)}else{if(f==n&&this.rowdetails&&this.showrowdetailscolumn){this._togglerowdetails(k.bounddata,true);this.gridcontent[0].scrollTop=0;this.gridcontent[0].scrollLeft=0}}}else{if(k.boundindex!=-1){var C=this.selectedrowindexes.slice(0);if(r.selectionmode!="none"){this._applyrowselection(k.boundindex,true,false);this._selectrowwithmouse(r,d,C)}}}}},_columnPropertyChanged:function(e,d,g,f){},_rowPropertyChanged:function(g,d,f,e){},propertyChangedHandler:function(d,e,g,f){if(this.isInitialized==undefined||this.isInitialized==false){return}switch(e){case"closeablegroups":d._initgroupsheader();break;case"showgroupsheader":d.rgrc();break;case"showrowdetailscolumn":d.render();break;case"scrollbarsize":d._arrange();break;case"theme":case"width":case"height":d.rgrc(false);break;case"altrows":d._renrows(d.virtualsizeinfo);break;case"groupsheaderheight":d._arrange();d._initgroupsheader();break;case"pagerheight":case"pagesizeoptions":d._initpager();break;case"selectedrowindex":d.selectrow(f);break;case"selectionmode":if(f=="none"){d.selectedrowindexes=new Array();d.selectedrowindex=-1}d._renrows(d.virtualsizeinfo);break;case"showheader":if(f){d.columnsheader.css("display","block")}else{d.columnsheader.css("display","none")}break;case"virtualmode":d.dataview.virtualmode=d.virtualmode;d.dataview.refresh(false);d._ren(false,false,false);break;case"columnsmenu":d.render();break;case"columns":this._columns=null;d.rgrc();break;case"pageable":if(d._loading){alert(d.loadingerrormessage);return}d.dataview.pageable=d.pageable;d.dataview.pagenum=0;d.dataview.pagesize=d._gpsz();if(d.virtualmode){d.updatebounddata()}d.dataview.refresh(true);d._initpager();d._ren(false,false,false);break;case"groupable":d.dataview.groupable=d.groupable;d.dataview.pagenum=0;d.dataview.refresh(false);d._ren(false,false,true);break}}});function c(d,e){this.owner=d;this.datafield=null;this.text="";this.sortable=true;this.hideable=true;this.hidden=false;this.groupable=true;this.renderer=null;this.cellsrenderer=null;this.checkchange=null,this.columntype=null;this.cellsformat="";this.align="left";this.cellsalign="left";this.width="auto";this.pinned=false;this.visibleindex=-1;this.getcolumnproperties=function(){return{sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype}},this.setproperty=function(f,g){if(this[f]){var h=this[f];this[f]=g;this.owner._columnPropertyChanged(this,f,g,h)}};this._initfields=function(f){if(f!=null){if(f.datafield){this.datafield=f.datafield}if(f.text){this.text=f.text}if(f.sortable){this.sortable=f.sortable}if(f.hideable){this.hideable=f.hideable}if(f.hidden){this.hidden=f.hidden}if(f.groupable){this.groupable=f.groupable}if(f.renderer){this.renderer=f.renderer}if(f.align){this.align=f.align}if(f.cellsalign){this.cellsalign=f.cellsalign}if(f.cellsformat){this.cellsformat=f.cellsformat}if(f.width){this.width=f.width}if(f.cellsrenderer){this.cellsrenderer=f.cellsrenderer}if(f.columntype){this.columntype=f.columntype}if(f.checkchange){this.checkchange=f.checkchange}if(f.pinned){this.pinned=f.pinned}if(f.visibleindex){this.visibleindex=f.visibleindex}}};this._initfields(e);return this}function a(d,e){this.setdata=function(f){if(f!=null){this.bounddata=f;this.boundindex=f.boundindex;this.visibleindex=f.visibleindex;this.group=f.group;this.parentbounddata=f.parentItem;this.uniqueid=f.uniqueid;this.level=f.level}};this.setdata(e);this.parentrow=null;this.subrows=new Array();this.owner=d;this.height=25;this.hidden=false;this.rowdetails=null;this.rowdetailsheight=100;this.rowdetailshidden=true;this.top=-1;this.getrowinfo=function(){return{hidden:this.hidden,rowdetails:this.rowdetails,rowdetailsheight:this.rowdetailsheight,showdetails:!this.rowdetailshidden,height:this.height,index:this.visibleindex}};this.setrowinfo=function(f){this.hidden=f.hidden;this.rowdetails=f.rowdetails;this.rowdetailsheight=f.rowdetailsheight;this.rowdetailshidden=!f.showdetails;this.height=f.height};return this}b.jqx.collection=function(d){this.records=new Array();this.owner=d;this.updating=false;this.beginupdate=function(){this.updating=true};this.resumeupdate=function(){this.updating=false};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(f){var e=this.length;var g=Number(arguments[1])||0;g=(g<0)?Math.ceil(g):Math.floor(g);if(g<0){g+=e}for(;g<e;g++){if(g in this&&this[g]===f){return g}}return -1}}this._raiseEvent=function(e){var f=new jQuery.Event("collectionchanged");f.owner=this.owner;f.args=e;b(this.owner).trigger(f)};this.replace=function(f,e){this.records[f]=e;if(!this.updating){this._raiseEvent({type:"replace",element:e})}};this.isempty=function(e){if(this.records[e]==undefined){return true}return false};this.initialize=function(e){if(e<1){e=1}this.records[e-1]=-1};this.length=function(){return this.records.length};this.indexOf=function(e){return this.records.indexOf(e)};this.add=function(e){if(e==null){return false}this.records[this.records.length]=e;if(!this.updating){this._raiseEvent({type:"add",element:e})}return true};this.insertAt=function(f,e){if(f==null||f==undefined){return false}if(e==null){return false}if(f>=0){if(f<this.records.length){this.records.splice(f,0,e);if(!this.updating){this._raiseEvent({type:"insert",index:f,element:e})}return true}else{return this.add(e)}}return false};this.remove=function(f){if(f==null||f==undefined){return false}var e=this.records.indexOf(f);if(e!=-1){this.records.splice(e,1);if(!this.updating){this._raiseEvent({type:"remove",element:f})}return true}return false};this.removeAt=function(f){if(f==null||f==undefined){return false}if(f<0){return false}if(f<this.records.length){var e=this.records[f];this.records.splice(f,1);if(!this.updating){this._raiseEvent({type:"removeAt",index:f,element:e})}return true}return false};return this};b.jqx.dataview=function(){this.self=this;this.uniqueId="id";this.records=[];this.rows=[];this.columns=[];this.groups=[];this.filter=null;this.updated=null;this.update=null;this.suspend=false;this.pagesize=0;this.pagenum=0;this.totalrows=0;this.totalrecords=0;this.groupable=true;this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this.virtualmode=true;this._cachegrouppages=new Array();this.source=null;this.changedrecords=new Array();this.rowschangecallback=null;this.suspendupdate=function(){this.suspend=true},this.isupdating=function(){return this.suspend},this.resumeupdate=function(d){this.suspend=false;if(d==undefined){d=true}this.refresh(d)},this.getrecords=function(){return this.records},this.databind=function(g,f){this.source=g;if(f!==undefined){uniqueId=f}var e=this;switch(g.datatype){case"local":case"array":default:if(g.data!=null){var d=g.data.length;this.totalrecords=this.virtualmode?(g.totalrecords||d):d;if(this.totalrecords==undefined){this.totalrecords=0}if(!b.isArray(g.data)){this.records=new Array();b.each(g.data,function(h){e.records[h]=this})}else{this.records=g.data}this.originaldata=g.data;if(g.recordstartindex&&this.virtualmode){e.updateview(g.recordstartindex,g.recordstartindex+e.pagesize)}else{e.refresh()}e.update()}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":if(g.data!=null){if(b.isFunction(g.beforeprocessing)){g.beforeprocessing.call(data)}if(g.datatype==="xml"){e.loadxml(g.data,g.data,g)}else{e.loadjson(g.data,g.data,g)}if(g.recordstartindex){e.updateview(g.recordstartindex,g.recordstartindex+e.pagesize)}else{e.refresh()}e.update();return}b.ajax({dataType:g.datatype,url:g.url,success:function(k,h,l){if(b.isFunction(g.beforeprocessing)){g.beforeprocessing.call(k,h,l)}if(g.datatype==="xml"){e.loadxml(null,k,g)}else{e.loadjson(null,k,g)}if(g.recordstartindex){e.updateview(g.recordstartindex,g.recordstartindex+e.pagesize)}else{e.refresh()}e.update()},error:function(l,h,k){if(b.isFunction(g.loaderror)){g.loaderror.call(l,h,k)}l=null;e.update(false)},beforeSend:function(k,h){if(b.isFunction(g.beforeSend)){g.beforeSend.call(k,h)}}})}};this.getid=function(g,e,f){if(b(g,e).length>0){return b(g,e).text()}if(g){if(g.toString().length>0){var d=b(e).attr(g);if(d!=null&&d.toString().length>0){return d}}}return f};this.loadjson=function(k,l,d){if(d.root==undefined){d.root=""}if(d.record==undefined){d.record=""}var k=k||l;if(!k){k=[]}if(d.root!=""){b.each(k,function(u){var t=this;if(this==d.root){k=this;return false}else{if(this[d.root]!=undefined){k=this[d.root]}}})}if(k==null){alert("Parse error in $.parseJSON function.")}var f=k.length;this.totalrecords=this.virtualmode?(d.totalrecords||f):f;this.records=new Array();this.originaldata=new Array();var h=this.records;var s=!this.pageable?d.recordstartindex:this.pagesize*this.pagenum;this.recordids=this.recordids||new Array();if(this.virtualmode){this.recordids=new Array();f=s+this.pagesize}if(d.loadallrecords){s=0;f=this.totalrecords}var r=d.datafields.length;for(i=s;i<f;i++){var n=k[i];var e=this.getid(d.id,n,i);if(!this.recordids[e]){this.recordids[e]=n;var o={};for(j=0;j<r;j++){var g=d.datafields[j];var p="";if(undefined==g||g==null){continue}if(g.map){p=n[g.map];if(p!=undefined&&p!=null){p=p.toString()}else{p=""}}if(p==""){p=n[g.name];if(p!=undefined&&p!=null){p=p.toString()}else{p=""}}p=this.getvaluebytype(p,g);o[g.name]=p}if(d.recordendindex<=0||s<d.recordendindex){h[i]=b.extend({},o);h[i].uid=e;this.originaldata[i]=b.extend({},h[i])}}}this.records=h};this.getvaluebytype=function(g,d){var e=g;if(d.type=="date"){var f=new Date(g);if(f.toString()=="NaN"||f.toString()=="Invalid Date"){g=b.jqx.gridformat.tryparsedate(g)}else{g=f}if(g==null){g=e}}else{if(d.type=="float"){var g=parseFloat(g);if(isNaN(g)){g=e}}else{if(d.type=="int"){var g=parseInt(g);if(isNaN(g)){g=e}}else{if(d.type=="bool"){if(g!=null){if(g.toLowerCase()=="false"){g=false}else{if(g.toLowerCase()=="true"){g=true}}}if(g==1){g=true}else{if(g==0){g=false}else{g=""}}}}}}return g};this.loadxml=function(p,l,e){if(e.root==undefined){e.root=""}if(e.record==undefined){e.record=""}var p=p||b(e.root+" "+e.record,l);if(!p){p=[]}var g=p.length;this.totalrecords=this.virtualmode?(e.totalrecords||g):g;this.records=new Array();this.originaldata=new Array();var k=this.records;var t=!this.pageable?e.recordstartindex:this.pagesize*this.pagenum;this.recordids=this.recordids||new Array();if(this.virtualmode){this.recordids=new Array();g=t+this.pagesize}if(e.loadallrecords){t=0;g=this.totalrecords}var s=e.datafields.length;for(i=t;i<g;i++){var n=p[i];var f=this.getid(e.id,n,i);if(!this.recordids[f]){this.recordids[f]=n;var o={};for(j=0;j<s;j++){var h=e.datafields[j];var r="";if(undefined==h||h==null){continue}if(h.map){r=b(h.map,n).text()}if(r==""){r=b(h.name,n).text()}var d=r;r=this.getvaluebytype(r,h);o[h.name]=r}if(e.recordendindex<=0||t<e.recordendindex){k[i]=b.extend({},o);k[i].uid=f;this.originaldata[i]=b.extend({},k[i])}}}this.records=k};this.setpaging=function(d){if(d.pageSize!=undefined){this.pagesize=d.pageSize}if(d.pageNum!=undefined){this.pagenum=Math.min(d.pageNum,Math.ceil(this.totalrows/this.pagesize))}this.refresh()};this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}};this._clearcaches=function(){this.sortcache={};this.sortdata=[];this.changedrecords=new Array();this.records=new Array();this.originaldata=new Array();this.bounditems=new Array();this.loadedrecords=new Array();this.loadedrootgroups=new Array();this.loadedgroups=new Array();this.loadedgroupsByKey=new Array();this._cachegrouppages=new Array();this.recordsbyid={}};this.sortby=function(u,k,p){var r=Object.prototype.toString;if(k==null){this.sortdata=null;this.refresh();return}if(k==undefined){k=true}if(k=="a"||k=="asc"||k=="ascending"||k==true){k=true}else{k=false}var l=u;if(this.sortcache==undefined){this.sortcache={}}this.sortdata=[];var w=[];var s=false;if(!this.virtualmode&&this.sortcache[l]!=null){var d=this.sortcache[l];w=d._sortdata;if(d.direction==k){w.reverse()}else{if(!d.direction&&k){w.reverse()}s=true}}Object.prototype.toString=(typeof u=="function")?u:function(){return this[u]};var h=this.records;var t=this;var n="";if(this.source.datafields){b.each(this.source.datafields,function(){if(this.name==u){if(this.type){n=this.type}return false}})}if(w.length==0){if(h.length){var e=h.length;for(i=0;i<e;i++){var o=h[i];if(o!=null){var v=o;var g=v.toString();w.push({sortkey:g,value:v,index:i})}}}else{var f=false;for(obj in h){var o=h[obj];if(o==undefined){f=true;break}var v=o;w.push({sortkey:v.toString(),value:v,index:obj})}if(f){b.each(h,function(x,y){w.push({sortkey:y.toString(),value:y,index:x})})}}}if(!s){if(p==null){w.sort(this._compare)}else{w.sort(p)}}if(!k){w.reverse()}Object.prototype.toString=r;this.sortdata=w;this.sortcache[l]={_sortdata:w,direction:k};this.reload(this.records,this.rows,this.filter,this.updated,true)},this._compare=function(e,d){var e=e.sortkey;var d=d.sortkey;if(e===undefined){e=null}if(d===undefined){d=null}if(e===null&&d===null){return 0}if(e===null&&d!==null){return 1}if(e!==null&&d===null){return -1}if(b.jqx.gridformat.isNumber(e)&&b.jqx.gridformat.isNumber(d)){if(e<d){return -1}if(e>d){return 1}return 0}else{if(b.jqx.gridformat.isDate(e)&&b.jqx.gridformat.isDate(d)){if(e<d){return -1}if(e>d){return 1}return 0}else{if(!b.jqx.gridformat.isNumber(e)&&!b.jqx.gridformat.isNumber(d)){e=String(e).toLowerCase();d=String(d).toLowerCase()}}}try{if(e<d){return -1}if(e>d){return 1}}catch(f){var g=f}return 0};this._equals=function(e,d){return(this._compare(e,d)===0)};this.setFilter=function(d){this.filter=d;this.refresh()};this.getItemFromIndex=function(d){return this.records[d]};this.updaterow=function(e,g){if(g!=undefined&&e!=undefined){g.uid=e;if(!(g[this.source.id])){g[this.source.id]=g.uid}var d=this.recordsbyid["id"+e];var f=this.records.indexOf(d);this.records[f]=g;this.refresh();this.changedrecords[g.uid]={Type:"Update",OldData:d,Data:g};return true}return false};this.addrow=function(g,h,d){if(h!=undefined){if(!g){h.uid=this.getid(this.source.id,h,this.totalrecords);var e=this.recordsbyid["id"+h.uid];while(e!=null){var f=Math.floor(Math.random()*10000).toString();h.uid=f;e=this.recordsbyid["id"+f]}}else{h.uid=g}if(!(h[this.source.id])){h[this.source.id]=h.uid}if(d=="last"){this.records.push(h)}else{this.records.splice(0,0,h)}this.totalrecords++;this.refresh();this.changedrecords[h.uid]={Type:"New",Data:h};return true}return false};this.deleterow=function(e){if(e!=undefined){if(this.recordsbyid["id"+e]){var d=this.recordsbyid["id"+e];var f=this.records.indexOf(d);this.changedrecords[e]={Type:"Delete",Data:this.records[f]};this.records.splice(f,1);this.totalrecords--;this.refresh();return true}return false}return false};this.reload=function(f,d,v,g,h,y,x){var p=this;var o=new Array();var s=f;var k=d;var l=v;var t=g;var n=k.length;var A=0;var e=0;var w,r;this.columns=[];this.bounditems=new Array();this.loadedrecords=new Array();this.loadedrootgroups=new Array();this.loadedgroups=new Array();this.loadedgroupsByKey=new Array();this._cachegrouppages=new Array();this.recordsbyid={};if(this.totalrecords==0){Object.size=function(D){var C=0,B;for(B in D){if(D.hasOwnProperty(B)){C++}}return C};var z=Object.size(s);this.totalrecords=z;b.each(this.records,function(C){var D=this;var B=0;b.each(D,function(E,F){p.columns[B++]=E});return false})}if(this.virtualmode){if(this.pageable){this.updateview();return}var y=0;if(!this.groupable){this.updateview();return}else{var x=this.totalrecords}}else{var y=0;var x=this.totalrecords}if(this.groupable&&this.groups.length>0){var u=y;u=this.loadgrouprecords(0,y,x,l,e,t,k,n,o)}else{A=this.loadflatrecords(y,x,l,e,t,k,n,o)}if(n>e){k.splice(e,n-e)}if(this.groups.length>0&&this.groupable){this.totalrows=u}else{this.totalrows=A}return o};this.loadgrouprecords=function(B,M,K,u,f,G,t,x,y){var H=B;var D=this;var h=new Array();for(iGroupColumn=0;iGroupColumn<D.groups.length;iGroupColumn++){h[iGroupColumn]=D.generatekey()}var s=new Array();var l=0;var h=h;var k=new Array();var F=M;var O=M;var r=D.groups.length;this.loadedrecords=new Array();this.bounditems=new Array();this.loadedrecords=new Array();this.loadedrootgroups=new Array();this.loadedgroups=new Array();this.loadedgroupsByKey=new Array();this.sortedgroups=new Array();var o=this.sortdata!=null;var L=o?this.sortdata:this.records;for(obj=M;obj<K;obj++){var J={};if(!o){J=b.extend({},L[obj])}else{J=b.extend({},L[obj].value)}id=J[D.uniqueId];if(!u||u(J)){if(f>=x||id!=t[f][D.uniqueId]||(G&&G[id])){y[y.length]=f}var g=new Array();var A=0;for(iGroupColumn=0;iGroupColumn<r;iGroupColumn++){var p=D.groups[iGroupColumn];var E=J[p];if(null==E){continue}g[A++]={value:E,hash:h[iGroupColumn]}}if(g.length!=r){break}var C=null;var v="";var e=-1;for(q=0;q<g.length;q++){e++;var I=g[q].value;var n=g[q].hash;v=v+"_"+n+"_"+I;if(k[v]!=undefined&&k[v]!=null){C=k[v];continue}if(C==null){C={group:I,subItems:new Array(),subGroups:new Array(),level:0};s[l++]=C;C.uniqueid=D.generatekey();D.loadedgroupsByKey[I]=C}else{var w={group:I,subItems:new Array(),subGroups:new Array(),parentItem:C,level:C.level+1};D.loadedgroupsByKey[C.uniqueid+"_"+I]=w;w.uniqueid=D.generatekey();C.subGroups[C.subGroups.length++]=w;C=w}k[v]=C}if(C!=null){if(!J.uid){J.uid=this.getid(this.source.id,J,F)}if(!o){J.boundindex=F;this.recordsbyid["id"+J.uid]=L[obj]}else{J.boundindex=L[obj].index;this.recordsbyid["id"+J.uid]=L[obj].value}this.bounditems[J.boundindex]=J;this.sortedgroups[F]=J;J.uniqueid=D.generatekey();J.parentItem=C;J.level=C.level+1;C.subItems[C.subItems.length++]=J}else{if(!J.uid){J.uid=this.getid(this.source.id,J,F)}if(!o){J.boundindex=F;this.recordsbyid["id"+J.uid]=L[obj]}else{J.boundindex=L[obj].index;this.recordsbyid["id"+J.uid]=L[obj].value}this.sortedgroups[F]=J;this.bounditems[J.boundindex]=J;J.uniqueid=D.generatekey()}f++;F++;O++}}var z=function(P,Q,R){for(m=0;m<Q.subItems.length;m++){Q.subItems[m].visibleindex=B+R;P.rows[R]=Q.subItems[m];P.loadedrecords[R]=Q.subItems[m];R++}return R};var d=function(P,R,S){for(subGroup in R.subGroups){var Q=R.subGroups[subGroup];if(Q.subGroups){P.loadedgroups[P.loadedgroups.length]=Q;Q.visibleindex=B+S;P.rows[S]=Q;P.loadedrecords[S]=Q;S++;if(Q.subGroups.length>0){S=d(P,Q,S)}else{if(Q.subItems.length>0){S=z(P,Q,S)}}}}if(R.subItems.length>0){S=z(P,R,S)}return S};var N=s.length;this.loadedgroups=new Array();this.rows=new Array();var H=0;for(F=0;F<N;F++){var p=s[F];this.loadedrootgroups[F]=p;this.loadedgroups[this.loadedgroups.length]=p;p.visibleindex=B+H;this.rows[H]=p;this.loadedrecords[H]=p;H++;H=d(this,p,H)}return H};this.loadflatrecords=function(d,p,e,r,l,v,o,s){var u=this;var k=d;var n=d;p=Math.min(p,this.totalrecords);var g=this.sortdata!=null;var f=this.source.id&&(this.source.datatype=="local"||this.source.datatype=="array"||this.source.datatype=="");var h=g?this.sortdata:this.records;for(obj=d;obj<p;obj++){var t={};if(!g){t=b.extend({},h[obj]);id=t[u.uniqueId];t.boundindex=k;u.loadedrecords[k]=t;if(!t.uid){t.uid=u.getid(u.source.id,t,k)}u.recordsbyid["id"+t.uid]=h[obj];t.uniqueid=u.generatekey();u.bounditems[this.bounditems.length]=t}else{t=b.extend({},h[obj].value);id=t[u.uniqueId];t.boundindex=h[obj].index;if(!t.uid){t.uid=u.getid(u.source.id,t,t.boundindex)}u.recordsbyid["id"+t.uid]=h[obj].value;u.loadedrecords[k]=t;t.uniqueid=u.generatekey();u.bounditems[t.boundindex]=t}if(!e||e(t)){if(r>=o||id!=v[r][u.uniqueId]||(l&&l[id])){s[s.length]=r}v[r]=t;r++;t.visibleindex=n;n++}k++}return n},this._updategroupsinpage=function(D,u,L,f,x,n,h){var t=new Array();var y=[];if(this.groupable&&this.groups.length>0){var C=0;var l=new Array();var k=new Array();for(iGroupColumn=0;iGroupColumn<D.groups.length;iGroupColumn++){k[iGroupColumn]=D.generatekey()}var G=0;var s=new Array();var o=0;if(h>this.totalrecords){h=this.totalrecords}for(obj=n;obj<h;obj++){var I=b.extend({},D.sortedgroups[obj]);id=I[D.uniqueId];if(!u||u(I)){if(!D.pagesize||(L>=D.pagesize*D.pagenum&&L<D.pagesize*(D.pagenum+1))){if(f>=x||id!=t[f][D.uniqueId]||(updated&&updated[id])){y[y.length]=f}var g=new Array();var A=0;for(iGroupColumn=0;iGroupColumn<D.groups.length;iGroupColumn++){var r=D.groups[iGroupColumn];var E=I[r];if(null==E){continue}g[A++]={value:E,hash:k[iGroupColumn]}}if(g.length!=D.groups.length){break}var B=null;var v="";var e=-1;for(q=0;q<g.length;q++){e++;var H=g[q].value;var p=g[q].hash;v=v+"_"+p+"_"+H;if(l[v]!=undefined&&l[v]!=null){B=l[v];continue}if(B==null){B={group:H,subItems:new Array(),subGroups:new Array(),level:0};s[o++]=B;var F=D.loadedgroupsByKey[H];B.visibleindex=F.visibleindex;B.uniqueid=F.uniqueid}else{var w={group:H,subItems:new Array(),subGroups:new Array(),parentItem:B,level:B.level+1};var F=D.loadedgroupsByKey[B.uniqueid+"_"+H];w.visibleindex=F.visibleindex;w.uniqueid=F.uniqueid;B.subGroups[B.subGroups.length++]=w;B=w}l[v]=B}if(B!=null){I.parentItem=B;I.level=B.level+1;B.subItems[B.subItems.length++]=I}f++}G++;L++}}var z=function(N,O,M){for(m=0;m<O.subItems.length;m++){t[M]=b.extend({},O.subItems[m]);M++}return M};var J=function(P){var N=false;for(subGroup in P.subGroups){var O=P.subGroups[subGroup];if(O.subGroups){if(O.subGroups.length>0){var M=J(O);if(M){N=true;return true}}if(O.subItems.length>0){N=true;return true}}}if(P.subItems.length>0){N=true;return true}return N};var d=function(N,P,M){for(subGroup in P.subGroups){var O=P.subGroups[subGroup];if(O.subGroups){if(J(O)){t[M]=O;M++;if(O.subGroups.length>0){M=d(N,O,M)}else{if(O.subItems.length>0){M=z(N,O,M)}}}}}if(P.subItems.length>0){M=z(N,P,M)}return M};var K=0;for(G=0;G<s.length;G++){var r=s[G];if(J(r)){t[C]=r;C++;C=d(this,r,C)}}}return t};this.updateview=function(o,p){var s=this;var k=this.pagesize*this.pagenum;var n=0;var t=new Array();var e=this.filter;var h=this.updated;var l=t.length;if(this.pageable){if(this.virtualmode){if(!this.groupable||this.groups.length==0){this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,n,h,t,l,[]);this.totalrows=t.length}else{if(this.groupable&&this.groups.length>0){if(this._cachegrouppages[this.pagenum+"_"+this.pagesize]!=undefined){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize];this.totalrows=this.rows.length;return}this.loadgrouprecords(0,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,n,h,t,l,[]);this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows;this.totalrows=this.rows.length;return}}}}else{if(this.virtualmode&&(!this.groupable||this.groups.length==0)){var g=this.pagesize;if(g==0){g=Math.min(100,this.totalrecords)}var d=g*this.pagenum;if(this.loadedrecords.length==0){d=0}if(o!=null&&p!=null){this.loadflatrecords(o,p,e,n,h,t,l,[])}else{this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,n,h,t,l,[])}this.totalrows=this.loadedrecords.length;this.rows=t;if(t.length>=g){return}}}if(this.groupable&&this.pageable&&this.groups.length>0){t=this._updategroupsinpage(s,e,k,n,l,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum))}else{for(i=this.pagesize*this.pagenum;i<this.pagesize*(1+this.pagenum);i++){var r=i<this.loadedrecords.length?this.loadedrecords[i]:null;if(r==null){continue}if(!e||e(r)){if(!this.pagesize||(k>=this.pagesize*this.pagenum&&k<=this.pagesize*(this.pagenum+1))){t[n]=r;n++}k++}}}if((t.length==0||t.length<this.pagesize)&&!this.pageable&&this.virtualmode){n=t.length;var f=t.length;for(i=this.pagesize*this.pagenum;i<this.pagesize*(1+this.pagenum)-f;i++){var r={};r.boundindex=i+f;r.visibleindex=i+f;r.uniqueid=s.generatekey();r.empty=true;s.bounditems[i+f]=r;t[n]=r;n++}}this.rows=t};this.generatekey=function(){var d=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d())};this.refresh=function(e){if(this.suspend){return}if(e==undefined){e=true}var d=this.rows.length;var g=this.totalrows;if(this.filter&&!this.virtualmode){}var f=this.reload(this.records,this.rows,this.filter,this.updated,e);this.updated=null;if(this.rowschangecallback!=null){if(g!=totalrows){this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()})}if(d!=rows.length){this.rowschangecallback({type:"RowsCountChanged",data:{previous:d,current:rows.length}})}if(f.length>0||d!=rows.length){this.rowschangecallback({type:"RowsChanged",data:{previous:d,current:rows.length,diff:f}})}}};return this};b.jqx.gridformat={};b.extend(b.jqx.gridformat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(d){return typeof d==="boolean"},isObject:function(d){return(d&&(typeof d==="object"||b.isFunction(d)))||false},isDate:function(d){return d instanceof Date},arrayIndexOf:function(g,f){if(g.indexOf){return g.indexOf(f)}for(var d=0,e=g.length;d<e;d++){if(g[d]===f){return d}}return -1},isString:function(d){return typeof d==="string"},isNumber:function(d){return typeof d==="number"&&isFinite(d)},isNull:function(d){return d===null},isUndefined:function(d){return typeof d==="undefined"},isValue:function(d){return(this.isObject(d)||this.isString(d)||this.isNumber(d)||this.isBoolean(d))},isEmpty:function(d){if(!this.isString(d)&&this.isValue(d)){return false}else{if(!this.isValue(d)){return true}}d=b.trim(d).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return d===""},startsWith:function(e,d){return e.indexOf(d)===0},endsWith:function(e,d){return e.substr(e.length-d.length)===d},trim:function(d){return(d+"").replace(this.regexTrim,"")},isArray:function(d){return this.toString.call(d)==="[object Array]"},defaultcalendar:function(){var d={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","};return d},expandFormat:function(h,g){g=g||"F";var f,e=h.patterns,d=g.length;if(d===1){f=e[g];if(!f){throw"Invalid date format string '"+g+"'."}g=f}else{if(d===2&&g.charAt(0)==="%"){g=g.charAt(1)}}return g},getEra:function(f,e){if(!e){return 0}var k,h=f.getTime();for(var g=0,d=e.length;g<d;g++){k=e[g].start;if(k===null||h>=k){return g}}return 0},toUpper:function(d){return d.split("\u00A0").join(" ").toUpperCase()},toUpperArray:function(d){var g=[];for(var f=0,e=d.length;f<e;f++){g[f]=toUpper(d[f])}return g},getEraYear:function(e,g,d,h){var f=e.getFullYear();if(!h&&g.eras){f-=g.eras[d].offset}return f},getDayIndex:function(h,g,e){var d,k=h.days,f=h._upperDays;if(!f){h._upperDays=f=[toUpperArray(k.names),toUpperArray(k.namesAbbr),toUpperArray(k.namesShort)]}g=toUpper(g);if(e){d=this.arrayIndexOf(f[1],g);if(d===-1){d=this.arrayIndexOf(f[2],g)}}else{d=this.arrayIndexOf(f[0],g)}return d},getMonthIndex:function(n,l,f){var d=n.months,e=n.monthsGenitive||n.months,h=n._upperMonths,k=n._upperMonthsGen;if(!h){n._upperMonths=h=[toUpperArray(d.names),toUpperArray(d.namesAbbr)];n._upperMonthsGen=k=[toUpperArray(e.names),toUpperArray(e.namesAbbr)]}l=toUpper(l);var g=this.arrayIndexOf(f?h[1]:h[0],l);if(g<0){g=this.arrayIndexOf(f?k[1]:k[0],l)}return g},appendPreOrPostMatch:function(g,d){var f=0,k=false;for(var h=0,e=g.length;h<e;h++){var l=g.charAt(h);switch(l){case"'":if(k){d.push("'")}else{f++}k=false;break;case"\\":if(k){d.push("\\")}k=!k;break;default:d.push(l);k=false;break}}return f},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(d,f){var e="";if(f&&f.target){e="target="+f.target}if(e!=""){return"<a "+e+' href="../../jqwidgets/%27+d+%27">'+d+"</a>"}return'<a href="../../jqwidgets/%27+d+%27">'+d+"</a>"},formatemail:function(d){return'<a href="mailto:'+d+'">'+d+"</a>"},formatnumber:function(u,t,o){if(o==undefined||o==null){o=this.defaultcalendar()}if(!this.isNumber(u)){u*=1}var p;if(t.length>1){p=parseInt(t.slice(1),10)}var w={};var r=t.charAt(0).toUpperCase();w.thousandsSeparator=o.thousandsseparator;w.decimalSeparator=o.decimalseparator;switch(r){case"D":case"d":case"F":case"f":w.decimalPlaces=p;break;case"N":case"n":w.decimalPlaces=0;break;case"C":case"c":w.decimalPlaces=p;if(o.currencysymbolposition=="before"){w.prefix=o.currencysymbol}else{w.suffix=o.currencysymbol}break;case"P":case"p":w.suffix=o.percentagesymbol;break;default:throw"Bad number format specifier: "+r}if(this.isNumber(u)){var h=(u<0);var f=u+"";var s=(w.decimalSeparator)?w.decimalSeparator:".";var d;if(this.isNumber(w.decimalPlaces)){var k=w.decimalPlaces;var n=Math.pow(10,k);f=Math.round(u*n)/n+"";d=f.lastIndexOf(".");if(k>0){if(d<0){f+=s;d=f.length-1}else{if(s!=="."){f=f.replace(".",s)}}while((f.length-1-d)<k){f+="0"}}}if(w.thousandsSeparator){var v=w.thousandsSeparator;d=f.lastIndexOf(s);d=(d>-1)?d:f.length;var g=f.substring(d);var e=-1;for(var l=d;l>0;l--){e++;if((e%3===0)&&(l!==d)&&(!h||(l>1))){g=v+g}g=f.charAt(l-1)+g}f=g}f=(w.prefix)?w.prefix+f:f;f=(w.suffix)?f+w.suffix:f;return f}else{return u}},tryparsedate:function(e,f){if(f==undefined||f==null){f=this.defaultcalendar()}var d=this;patterns=f.patterns;for(prop in patterns){date=d.parsedate(e,patterns[prop],f);if(date){return date}}return null},getparseregexp:function(d,s){var u=d._parseRegExp;if(!u){d._parseRegExp=u={}}else{var h=u[s];if(h){return h}}var r=this.expandFormat(d,s).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),o=["^"],e=[],n=0,g=0,x=this.getTokenRegExp(),k;while((k=x.exec(r))!==null){var w=r.slice(n,k.index);n=x.lastIndex;g+=this.appendPreOrPostMatch(w,o);if(g%2){o.push(k[0]);continue}var f=k[0],l=f.length,t;switch(f){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":t="(\\D+)";break;case"tt":case"t":t="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":t="(\\d{"+l+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":t="(\\d\\d?)";break;case"zzz":t="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":t="([+-]?\\d\\d?)";break;case"/":t="(\\"+d["/"]+")";break;default:throw"Invalid date format pattern '"+f+"'.";break}if(t){o.push(t)}e.push(k[0])}this.appendPreOrPostMatch(r.slice(n),o);o.push("$");var v=o.join("").replace(/\s+/g,"\\s+"),p={regExp:v,groups:e};return u[s]=p},outOfRange:function(f,d,e){return f<d||f>e},expandYear:function(k,g){var e=new Date(),d=getEra(e);if(g<100){var f=k.twoDigitYearMax;f=typeof f==="string"?new Date().getFullYear()%100+parseInt(f,10):f;var h=this.getEraYear(e,k,d);g+=h-(h%100);if(g>f){g-=100}}return g},parsedate:function(D,K,y){if(y==undefined||y==null){y=this.defaultcalendar()}D=this.trim(D);var v=y,P=this.getparseregexp(v,K),o=new RegExp(P.regExp).exec(D);if(o===null){return null}var L=P.groups,B=null,t=null,O=null,N=null,u=null,k=0,G,F=0,M=0,d=0,f=null,w=false;for(var H=0,J=L.length;H<J;H++){var e=o[H+1];if(e){var C=L[H],h=C.length,n=parseInt(e,10);switch(C){case"dd":case"d":N=n;if(this.outOfRange(N,1,31)){return null}break;case"MMM":case"MMMM":O=this.getMonthIndex(v,e,h===3);if(this.outOfRange(O,0,11)){return null}break;case"M":case"MM":O=n-1;if(this.outOfRange(O,0,11)){return null}break;case"y":case"yy":case"yyyy":t=h<4?this.expandYear(v,n):n;if(this.outOfRange(t,0,9999)){return null}break;case"h":case"hh":k=n;if(k===12){k=0}if(this.outOfRange(k,0,11)){return null}break;case"H":case"HH":k=n;if(this.outOfRange(k,0,23)){return null}break;case"m":case"mm":F=n;if(this.outOfRange(F,0,59)){return null}break;case"s":case"ss":M=n;if(this.outOfRange(M,0,59)){return null}break;case"tt":case"t":w=v.PM&&(e===v.PM[0]||e===v.PM[1]||e===v.PM[2]);if(!w&&(!v.AM||(e!==v.AM[0]&&e!==v.AM[1]&&e!==v.AM[2]))){return null}break;case"f":case"ff":case"fff":d=n*Math.pow(10,3-h);if(this.outOfRange(d,0,999)){return null}break;case"ddd":case"dddd":u=this.getDayIndex(v,e,h===3);if(this.outOfRange(u,0,6)){return null}break;case"zzz":var g=e.split(/:/);if(g.length!==2){return null}G=parseInt(g[0],10);if(this.outOfRange(G,-12,13)){return null}var r=parseInt(g[1],10);if(this.outOfRange(r,0,59)){return null}f=(G*60)+(startsWith(e,"-")?-r:r);break;case"z":case"zz":G=n;if(this.outOfRange(G,-12,13)){return null}f=G*60;break;case"g":case"gg":var x=e;if(!x||!v.eras){return null}x=trim(x.toLowerCase());for(var I=0,E=v.eras.length;I<E;I++){if(x===v.eras[I].name.toLowerCase()){B=I;break}}if(B===null){return null}break}}}var s=new Date(),A,p=v.convert;A=s.getFullYear();if(t===null){t=A}else{if(v.eras){t+=v.eras[(B||0)].offset}}if(O===null){O=0}if(N===null){N=1}if(p){s=p.toGregorian(t,O,N);if(s===null){return null}}else{s.setFullYear(t,O,N);if(s.getDate()!==N){return null}if(u!==null&&s.getDay()!==u){return null}}if(w&&k<12){k+=12}s.setHours(k,F,M,d);if(f!==null){var z=s.getMinutes()-(f+s.getTimezoneOffset());s.setHours(s.getHours()+parseInt(z/60,10),z%60)}return s},cleardatescache:function(){this.datescache=new Array()},formatdate:function(A,E,v){if(v==undefined||v==null){v=this.defaultcalendar()}var g=A.toString()+"_"+E;if(this.datescache&&this.datescache[g]){return this.datescache[g]}if(!E||!E.length||E==="i"){var G;G=this.formatDate(A,v.patterns.F,culture);return G}var B=v.eras,e=E==="s";E=this.expandFormat(v,E);G=[];var l,C=["0","00","000"],r,s,d=/([^d]|^)(d|dd)([^d]|$)/g,F=0,x=this.getTokenRegExp(),f;function o(H,K){var J,I=H+"";if(K>1&&I.length<K){J=(C[K-2]+I);return J.substr(J.length-K,K)}else{J=I}return J}function D(){if(r||s){return r}r=d.test(E);s=true;return r}function h(I,H){if(f){return f[H]}switch(H){case 0:return I.getFullYear();case 1:return I.getMonth();case 2:return I.getDate()}}for(;;){var n=x.lastIndex,w=x.exec(E);var t=E.slice(n,w?w.index:E.length);F+=this.appendPreOrPostMatch(t,G);if(!w){break}if(F%2){G.push(w[0]);continue}var y=w[0],k=y.length;switch(y){case"ddd":case"dddd":var u=(k===3)?v.days.namesAbbr:v.days.names;G.push(u[A.getDay()]);break;case"d":case"dd":r=true;G.push(o(h(A,2),k));break;case"MMM":case"MMMM":var z=h(A,1);G.push(v.months[k===3?"namesAbbr":"names"][z]);break;case"M":case"MM":G.push(o(h(A,1)+1,k));break;case"y":case"yy":case"yyyy":z=this.getEraYear(A,v,this.getEra(A,B),e);if(k<4){z=z%100}G.push(o(z,k));break;case"h":case"hh":l=A.getHours()%12;if(l===0){l=12}G.push(o(l,k));break;case"H":case"HH":G.push(o(A.getHours(),k));break;case"m":case"mm":G.push(o(A.getMinutes(),k));break;case"s":case"ss":G.push(o(A.getSeconds(),k));break;case"t":case"tt":z=A.getHours()<12?(v.AM?v.AM[0]:" "):(v.PM?v.PM[0]:" ");G.push(k===1?z.charAt(0):z);break;case"f":case"ff":case"fff":G.push(o(A.getMilliseconds(),3).substr(0,k));break;case"z":case"zz":l=A.getTimezoneOffset()/60;G.push((l<=0?"+":"-")+o(Math.floor(Math.abs(l)),k));break;case"zzz":l=A.getTimezoneOffset()/60;G.push((l<=0?"+":"-")+o(Math.floor(Math.abs(l)),2)+":"+o(Math.abs(A.getTimezoneOffset()%60),2));break;case"g":case"gg":if(v.eras){G.push(v.eras[getEra(A,B)].name)}break;case"/":G.push(v["/"]);break;default:throw"Invalid date format pattern '"+y+"'.";break}}var p=G.join("");if(!this.datescache){this.datescache=new Array()}this.datescache[g]=p;return p}})})(jQuery);